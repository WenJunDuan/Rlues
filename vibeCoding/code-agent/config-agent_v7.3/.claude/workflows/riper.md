# RIPER-10 执行循环

## 完整流程图

```
┌─────────────────────────────────────────────────────────────────┐
│                      RIPER-10 Flow                              │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────┐    ┌─────┐    ┌─────┐    ┌─────┐    ┌─────┐           │
│  │ R1  │───▶│  I  │───▶│  P  │───▶│  E  │───▶│ R2  │           │
│  └─────┘    └─────┘    └─────┘    └─────┘    └─────┘           │
│  感知       设计       规划       执行       闭环               │
│                                                                 │
│  PDM        AR         PM        LD         QE                 │
│  sou        thinking   meeting   skill选择   verification      │
│             寸止       寸止               寸止                  │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## R1 - RESEARCH (感知)

**目标**: 理解需求和代码上下文

**主导**: PDM

**动作**:
```
1. 读取 project_document/.ai_state/active_context.md
2. memory.recall(project_path)
3. sou.search("<关键词>")
4. 仅读取直接相关文件
5. 识别歧义 → 寸止澄清
```

---

## I - INNOVATE (设计) [Path B/C]

**目标**: 设计技术方案

**主导**: AR

**动作**:
```
1. 加载 thinking skill
2. Path C: 启用逐步思考
3. Data First: 先定义数据结构
4. 生成2-3个方案
5. Linus审查清单检查
6. [DESIGN_FREEZE] 让用户选择
```

---

## P - PLAN (规划) [Path B/C]

**目标**: 制定执行计划

**主导**: PM

**动作**:
```
1. 加载 meeting skill
2. 召开任务分解会
3. 输出WBS任务清单
4. [PLAN_READY] 等待确认
```

---

## E - EXECUTE (执行)

**目标**: 实现代码

**主导**: LD

**技能选择**:
- `--skill=codex` → Codex执行
- `--skill=gemini` → Gemini执行（未来）
- 默认 → Claude原生执行

**动作**:
```
1. 读取任务清单
2. 选择执行技能
3. 执行代码
4. 验证回路
5. Path C: 每Phase [PRE_COMMIT]
```

---

## R2 - REVIEW (闭环)

**目标**: 验收和知识固化

**主导**: QE

**动作**:
```
1. 加载 verification skill
2. 加载官方 code-review 插件
3. 检查验收标准
4. memory.add 固化决策
5. 更新 .ai_state/
6. [TASK_DONE] 请求验收
```

---

## 异步意识

> **文件系统是唯一的真理**，不要依赖会话记忆。
