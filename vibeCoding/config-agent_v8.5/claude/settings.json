{
  "permissions": {
    "allow": [
      "Read",
      "Write",
      "Edit",
      "MultiEdit",
      "Task",
      "WebSearch",
      "WebFetch",
      "Bash(node *)",
      "Bash(npm test)",
      "Bash(npm run *)",
      "Bash(npm install *)",
      "Bash(npx tsc *)",
      "Bash(npx eslint *)",
      "Bash(npx prettier *)",
      "Bash(npx ctx7 resolve *)",
      "Bash(git *)",
      "Bash(mkdir *)",
      "Bash(cp *)",
      "Bash(mv *)",
      "Bash(cat *)",
      "Bash(ls *)",
      "Bash(wc *)",
      "Bash(grep *)",
      "Bash(head *)",
      "Bash(tail *)",
      "Bash(find *)",
      "Bash(sort *)",
      "Bash(sed *)",
      "mcp__cunzhi__*",
      "mcp__augment-context-engine__*",
      "mcp__mcp-deepwiki__*"
    ],
    "deny": [
      "Bash(rm -rf /)",
      "Bash(sudo *)",
      "Bash(chmod 777 *)"
    ]
  },
  "plugins": {
    "enabled": [
      "code-review",
      "commit-commands",
      "feature-dev",
      "frontend-design",
      "hookify",
      "plugin-dev",
      "pr-review-toolkit",
      "security-guidance",
      "superpowers@superpowers-marketplace"
    ],
    "marketplaces": [
      {
        "name": "claude-official",
        "url": "registry:claude-plugins-official"
      },
      {
        "name": "claude-community",
        "url": "registry:claude-plugins-community"
      },
      {
        "name": "claude-local",
        "url": "local:.claude/plugins"
      },
      {
        "name": "superpowers-marketplace",
        "url": "github:obra/superpowers-marketplace"
      }
    ]
  },
  "hooks": {
    "SessionStart": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "node .claude/hooks/session-start.cjs"
          }
        ]
      }
    ],
    "Stop": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "node .claude/hooks/delivery-gate.cjs",
            "timeout": 120
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Write|Edit|MultiEdit",
        "hooks": [
          {
            "type": "command",
            "command": "node .claude/hooks/post-edit.cjs",
            "timeout": 30
          }
        ]
      }
    ],
    "PreToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "node .claude/hooks/pre-bash.cjs",
            "timeout": 5
          }
        ]
      }
    ],
    "SubagentStop": [
      {
        "hooks": [
          {
            "type": "prompt",
            "prompt": "子代理已完成任务。检查输出是否满足要求: 1) 是否完成了所有指定子任务 2) 是否有未解决的错误或 TODO 3) 是否符合 .ai_state/conventions.md 规范。如果通过回复 accept, 如果有问题回复 continue 并说明需要补充什么。"
          }
        ]
      }
    ]
  },
  "env": {
    "CLAUDE_CODE_EXPERIMENTAL_AGENT_TEAMS": "1",
    "CLAUDE_CODE_SUBAGENT_MODEL": "claude-sonnet-4-5-20250929",
    "VIBECODING_VERSION": "8.5",
    "VIBECODING_HOOKS_DISABLED": "0"
  },
  "mcpServers": {
    "augment-context-engine": {
      "type": "stdio",
      "command": "augment-context-engine",
      "note": "语义代码搜索 — R/D/E 阶段"
    },
    "cunzhi": {
      "type": "stdio",
      "command": "cunzhi",
      "note": "人工确认检查点 — 全阶段, 不可降级"
    },
    "mcp-deepwiki": {
      "type": "stdio",
      "command": "mcp-deepwiki",
      "note": "开源库文档查询 — R/D 阶段"
    }
  }
}