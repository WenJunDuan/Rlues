---
description: 系统调试，第一性原理诊断
---

# /debug - 系统调试

**触发词**: 调试、debug、排查、为什么不工作

## 核心理念

> **深度分析**: 追溯问题本质，不被表象迷惑

## 工作流

```
问题分析 → 第一性原理诊断 → 验证假设 → 修复 → 寸止确认
```

## 执行步骤

### 1. 问题分析
```markdown
1. sou.search 定位相关代码
2. 分析错误信息/日志
3. 理解预期vs实际行为
```

### 2. 第一性原理诊断
```markdown
## 诊断分析

### 现象
[用户描述的问题]

### 预期行为
[应该怎样]

### 实际行为
[实际怎样]

### 本质问题
[问题的根本原因，不是表象]

### 假设
1. [假设1] — 概率: 高
2. [假设2] — 概率: 中
```

### 3. 验证假设
```markdown
从最可能的假设开始验证:
- 检查代码逻辑
- 添加日志（用户要求时）
- 分析数据流
```

### 4. 寸止诊断确认
```javascript
寸止.ask({
  question: "诊断结果",
  diagnosis: "根本原因是...",
  evidence: ["证据1", "证据2"],
  options: ["确认并修复", "继续排查", "需要更多信息"]
})
```

### 5. 修复
```markdown
1. codex skill 修复代码
2. 自我修复循环(max 3)
3. 验证修复有效
```

### 6. 寸止验收
```markdown
报告修复结果，等待用户确认
```

## 自我修复循环

```
Execute → Fail? → Analyze → Fix → Retry (max 3)
                                    ↓
                           寸止: 请求人工介入
```

## 常见问题模式

| 现象 | 可能本质 |
|------|----------|
| 白屏 | JS错误、路由错误 |
| 接口500 | 后端异常、数据库错误 |
| 数据不对 | 状态管理、异步竞态 |
| 性能差 | N+1查询、内存泄漏 |
