# ==========================================
# Mihomo (Clash Meta) Smart å†…æ ¸ä¸“ç”¨ç‰ˆ
# æ ¸å¿ƒç‰¹æ€§ï¼šSmart ç®—æ³• (LightGBM) + Tailscale (100.65) + æ—  Provider
# é€‚ç”¨ï¼šä½¿ç”¨ç¬¬ä¸‰æ–¹ Smart å†…æ ¸çš„ FlClash / Mihomo Party / Verge
# ==========================================

# **=============================== å…¨å±€è®¾ç½® ===============================**
port: 7890
socks-port: 7891
redir-port: 7892
mixed-port: 7893
tproxy-port: 7894
allow-lan: true
mode: rule
bind-address: "*"
ipv6: true
log-level: info

# --- å†…æ ¸æ€§èƒ½å‚æ•° ---
unified-delay: true # ç»Ÿä¸€å»¶è¿Ÿè®¡ç®—
tcp-concurrent: true # TCP å¹¶å‘
global-client-fingerprint: chrome
keep-alive-idle: 600
keep-alive-interval: 15
find-process-mode: strict

profile:
  store-selected: true
  store-fake-ip: true
  smart-collector-size: 100 # [Smartä¸“ç”¨] æ•°æ®æ”¶é›†ç¼“å†²åŒºå¤§å°

# **=============================== Smart æ¨¡å‹é…ç½® ===============================**
# âš ï¸ å¿…é¡»é…åˆæ”¯æŒ Smart çš„ç¬¬ä¸‰æ–¹å†…æ ¸ä½¿ç”¨
lgbm-auto-update: true
lgbm-update-interval: 72
# æ¨¡å‹ä¸‹è½½åœ°å€ (é€šå¸¸ä½¿ç”¨ vernesong çš„æº)
lgbm-url: "https://github.com/vernesong/mihomo/releases/download/LightGBM-Model/Model-large.bin"

# **=============================== æµé‡å—…æ¢ ===============================**
sniffer:
  enable: true
  parse-pure-ip: true
  override-destination: true
  sniff:
    HTTP:
      ports: [80, 8080-8880]
    TLS:
      ports: [443, 8443]
    QUIC:
      ports: [443, 8443]
  force-domain:
    - "+.v2ex.com"
  skip-domain:
    - "Mijia Cloud"
    - "+.push.apple.com"
    - "+.baidu.com"
    - "+.bilibili.com"
    - "+.ts.net"

# **=============================== TUN é…ç½® ===============================**
tun:
  enable: true
  stack: mixed
  device: Mihomo
  auto-route: true
  auto-redirect: true
  auto-detect-interface: true
  strict-route: true
  dns-hijack:
    - any:53
    - tcp://any:53
  mtu: 9000
  gso: true
  gso-max-size: 65536
  udp-timeout: 300

  exclude-interface:
    - Tailscale
    - "utun*"

  route-exclude-address:
    - 100.65.0.0/10
    - fd7a:115c:a1e0::/48

# **=============================== DNS é…ç½® ===============================**
dns:
  enable: true
  ipv6: true
  prefer-h3: true
  respect-rules: true
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  use-hosts: true

  fake-ip-filter:
    - "+.lan"
    - "+.local"
    - "home.arpa"
    - "*.msftncsi.com"
    - "msftconnecttest.com"
    - "*.srv.nintendo.net"
    - "stun.*"
    - "*.ts.net"
    - "tailscale.com"

  default-nameserver:
    - 223.5.5.5
    - 119.29.29.29

  proxy-server-nameserver:
    - https://doh.pub/dns-query
    - https://dns.alidns.com/dns-query

  nameserver:
    - https://doh.pub/dns-query
    - https://dns.alidns.com/dns-query

  nameserver-policy:
    "+.ts.net": "100.100.100.100"
    "tailscale.com": "100.100.100.100"
    "geosite:cn,private":
      - https://doh.pub/dns-query
      - https://dns.alidns.com/dns-query
    "geosite:google,youtube,telegram,gfw":
      - https://1.1.1.1/dns-query
      - https://dns.google/dns-query

  fallback:
    - https://1.1.1.1/dns-query
    - https://dns.google/dns-query

  fallback-filter:
    geoip: true
    ipcidr:
      - 240.0.0.0/4

# **=============================== GEO æ•°æ®åº“ ===============================**
geodata-mode: true
geodata-loader: memconservative
geo-auto-update: true
geo-update-interval: 48
geox-url:
  geoip: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geoip.dat"
  geosite: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geosite.dat"
  mmdb: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geoip.metadb"

# **=============================== å¤–éƒ¨æ§åˆ¶ ===============================**
external-controller: 127.0.0.1:9090
secret: "123465."
external-ui: "ui"
external-ui-url: "https://github.com/Zephyruso/zashboard/releases/latest/download/dist.zip"

# **=============================== ç­–ç•¥ç»„é…ç½® ===============================**

# é”šç‚¹ï¼šSmart æ™ºèƒ½é€‰æ‹©
# æ›¿æ¢åŸæœ¬çš„ url-testï¼Œä½¿ç”¨ AI æ¨¡å‹
SmartGroup: &SmartGroup
  type: smart
  url: https://www.gstatic.com/generate_204
  interval: 300
  timeout: 2000
  strategy: sticky-sessions # ç²˜æ€§ä¼šè¯ï¼Œä¿è¯è¿æ¥ç¨³å®šæ€§
  uselightgbm: true # å¯ç”¨ LightGBM æ¨¡å‹
  collectdata: true # å¯ç”¨æ•°æ®æ”¶é›† (å–‚å…»æ¨¡å‹)
  include-all: true

proxy-groups:
  # ========== æ ¸å¿ƒå…¥å£ ==========
  - name: ğŸ¯ èŠ‚ç‚¹é€‰æ‹©
    type: select
    proxies:
      - æ™ºèƒ½é€‰æ‹©
      - æ‰‹åŠ¨é€‰æ‹©
      - ğŸ‡­ğŸ‡° é¦™æ¸¯ - æ™ºèƒ½é€‰æ‹©
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬ - æ™ºèƒ½é€‰æ‹©
      - ğŸ‡ºğŸ‡¸ ç¾å›½ - æ™ºèƒ½é€‰æ‹©
      - ğŸ‡¸ğŸ‡¬ ç‹®åŸ - æ™ºèƒ½é€‰æ‹©
      - DIRECT
    icon: https://raw.githubusercontent.com/Orz-3/mini/master/Color/Static.png

  - name: æ‰‹åŠ¨é€‰æ‹©
    type: select
    include-all: true
    filter: "^(?!.*(å®˜ç½‘|å‰©ä½™|åˆ°æœŸ|å¥—é¤|é‡ç½®|è”ç³»|ç¾¤|æ›´æ–°)).*$"
    icon: https://raw.githubusercontent.com/Orz-3/mini/master/Color/Cylink.png

  - name: æ™ºèƒ½é€‰æ‹©
    type: select
    proxies:
      - ğŸ‡­ğŸ‡° é¦™æ¸¯ - æ™ºèƒ½é€‰æ‹©
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬ - æ™ºèƒ½é€‰æ‹©
      - ğŸ‡°ğŸ‡· éŸ©å›½ - æ™ºèƒ½é€‰æ‹©
      - ğŸ‡¸ğŸ‡¬ ç‹®åŸ - æ™ºèƒ½é€‰æ‹©
      - ğŸ‡ºğŸ‡¸ ç¾å›½ - æ™ºèƒ½é€‰æ‹©
      - ğŸ‡¹ğŸ‡¼ å°æ¹¾ - æ™ºèƒ½é€‰æ‹©
      - ğŸŒ å…¶ä»– - æ™ºèƒ½é€‰æ‹©
    icon: https://raw.githubusercontent.com/Orz-3/mini/master/Color/Urltest.png

  # ========== åº”ç”¨åˆ†æµ ==========
  - name: ğŸ¤– äººå·¥æ™ºèƒ½
    type: select
    proxies:
      - ğŸ‡ºğŸ‡¸ ç¾å›½ - æ™ºèƒ½é€‰æ‹©
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬ - æ™ºèƒ½é€‰æ‹©
      - ğŸ‡¸ğŸ‡¬ ç‹®åŸ - æ™ºèƒ½é€‰æ‹©
      - ğŸ‡¹ğŸ‡¼ å°æ¹¾ - æ™ºèƒ½é€‰æ‹©
      - ğŸ¯ èŠ‚ç‚¹é€‰æ‹©
    icon: https://raw.githubusercontent.com/Orz-3/mini/master/Color/OpenAI.png

  - name: âœˆï¸ ç”µæŠ¥æ¶ˆæ¯
    type: select
    proxies:
      - ğŸ¯ èŠ‚ç‚¹é€‰æ‹©
      - ğŸ‡­ğŸ‡° é¦™æ¸¯ - æ™ºèƒ½é€‰æ‹©
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬ - æ™ºèƒ½é€‰æ‹©
      - ğŸ‡¸ğŸ‡¬ ç‹®åŸ - æ™ºèƒ½é€‰æ‹©
      - ğŸ‡ºğŸ‡¸ ç¾å›½ - æ™ºèƒ½é€‰æ‹©
    icon: https://raw.githubusercontent.com/Orz-3/mini/master/Color/Telegram.png

  - name: ğŸ¦ æ¨ç‰¹æœåŠ¡
    type: select
    proxies:
      - ğŸ¯ èŠ‚ç‚¹é€‰æ‹©
      - ğŸ‡­ğŸ‡° é¦™æ¸¯ - æ™ºèƒ½é€‰æ‹©
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬ - æ™ºèƒ½é€‰æ‹©
      - ğŸ‡ºğŸ‡¸ ç¾å›½ - æ™ºèƒ½é€‰æ‹©
      - DIRECT
    icon: https://raw.githubusercontent.com/Orz-3/mini/master/Color/Twitter.png

  - name: ğŸ¬ å›½é™…åª’ä½“
    type: select
    proxies:
      - ğŸ¯ èŠ‚ç‚¹é€‰æ‹©
      - ğŸ‡­ğŸ‡° é¦™æ¸¯ - æ™ºèƒ½é€‰æ‹©
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬ - æ™ºèƒ½é€‰æ‹©
      - ğŸ‡¸ğŸ‡¬ ç‹®åŸ - æ™ºèƒ½é€‰æ‹©
      - ğŸ‡ºğŸ‡¸ ç¾å›½ - æ™ºèƒ½é€‰æ‹©
    icon: https://raw.githubusercontent.com/Orz-3/mini/master/Color/Streaming.png

  - name: ğŸ“º å“”å“©å“”å“©
    type: select
    proxies:
      - DIRECT
      - ğŸ‡­ğŸ‡° é¦™æ¸¯ - æ™ºèƒ½é€‰æ‹©
      - ğŸ‡¹ğŸ‡¼ å°æ¹¾ - æ™ºèƒ½é€‰æ‹©
    icon: https://raw.githubusercontent.com/Orz-3/mini/master/Color/bilibili.png

  - name: ğŸ è‹¹æœæœåŠ¡
    type: select
    proxies:
      - DIRECT
      - ğŸ¯ èŠ‚ç‚¹é€‰æ‹©
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Apple.png

  - name: â“‚ï¸ å¾®è½¯æœåŠ¡
    type: select
    proxies:
      - DIRECT
      - ğŸ¯ èŠ‚ç‚¹é€‰æ‹©
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Microsoft.png

  - name: ğŸ” è°·æ­ŒæœåŠ¡
    type: select
    proxies:
      - ğŸ¯ èŠ‚ç‚¹é€‰æ‹©
      - ğŸ‡­ğŸ‡° é¦™æ¸¯ - æ™ºèƒ½é€‰æ‹©
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬ - æ™ºèƒ½é€‰æ‹©
      - ğŸ‡ºğŸ‡¸ ç¾å›½ - æ™ºèƒ½é€‰æ‹©
      - DIRECT
    icon: https://raw.githubusercontent.com/Orz-3/mini/master/Color/Google.png

  - name: ğŸ’³ PayPal
    type: select
    proxies:
      - ğŸ¯ èŠ‚ç‚¹é€‰æ‹©
      - ğŸ‡­ğŸ‡° é¦™æ¸¯ - æ™ºèƒ½é€‰æ‹©
      - ğŸ‡ºğŸ‡¸ ç¾å›½ - æ™ºèƒ½é€‰æ‹©
      - DIRECT
    icon: https://raw.githubusercontent.com/Orz-3/mini/master/Color/Paypal.png

  - name: ğŸ® æ¸¸æˆå¹³å°
    type: select
    proxies:
      - DIRECT
      - ğŸ¯ èŠ‚ç‚¹é€‰æ‹©
    icon: https://raw.githubusercontent.com/Orz-3/mini/master/Color/GAME.png

  - name: ğŸŒ å…¨çƒåŠ é€Ÿ
    type: select
    proxies:
      - ğŸ¯ èŠ‚ç‚¹é€‰æ‹©
      - æ™ºèƒ½é€‰æ‹©
      - æ‰‹åŠ¨é€‰æ‹©
    icon: https://raw.githubusercontent.com/Orz-3/mini/master/Color/Global.png

  - name: ğŸ¯ å…œåº•åˆ†æµ
    type: select
    proxies:
      - ğŸ¯ èŠ‚ç‚¹é€‰æ‹©
      - DIRECT
      - æ™ºèƒ½é€‰æ‹©
    icon: https://raw.githubusercontent.com/Orz-3/mini/master/Color/Final.png

  # ========== åœ°åŒº Smart ç»„ (æ­£åˆ™ç­›é€‰) ==========
  - name: ğŸ‡­ğŸ‡° é¦™æ¸¯ - æ™ºèƒ½é€‰æ‹©
    <<: *SmartGroup
    filter: "(?i)(æ¸¯|HK|Hong)"

  - name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬ - æ™ºèƒ½é€‰æ‹©
    <<: *SmartGroup
    filter: "(?i)(æ—¥|JP|Japan|ä¸œäº¬)"

  - name: ğŸ‡°ğŸ‡· éŸ©å›½ - æ™ºèƒ½é€‰æ‹©
    <<: *SmartGroup
    filter: "(?i)(éŸ©|KR|Korea|é¦–å°”)"

  - name: ğŸ‡¸ğŸ‡¬ ç‹®åŸ - æ™ºèƒ½é€‰æ‹©
    <<: *SmartGroup
    filter: "(?i)(æ–°|å¡|SG|Singapore|ç‹®åŸ)"

  - name: ğŸ‡ºğŸ‡¸ ç¾å›½ - æ™ºèƒ½é€‰æ‹©
    <<: *SmartGroup
    filter: "(?i)(ç¾|US|United States|America)"

  - name: ğŸ‡¹ğŸ‡¼ å°æ¹¾ - æ™ºèƒ½é€‰æ‹©
    <<: *SmartGroup
    filter: "(?i)(å°|æ¹¾|TW|Taiwan)"

  - name: ğŸŒ å…¶ä»– - æ™ºèƒ½é€‰æ‹©
    <<: *SmartGroup
    filter: "^(?!.*(ğŸ‡­ğŸ‡°|HK|Hong|é¦™æ¸¯|ğŸ‡¹ğŸ‡¼|TW|Taiwan|Wan|å°|æ¹¾|ğŸ‡¯ğŸ‡µ|JP|Japan|æ—¥æœ¬|ğŸ‡¸ğŸ‡¬|SG|Singapore|ç‹®åŸ|ğŸ‡ºğŸ‡¸|US|United States|America|ç¾å›½|ğŸ‡°ğŸ‡·|KR|Korea|éŸ©å›½|éŸ“)).*$"

# **=============================== è§„åˆ™é›†é…ç½® ===============================**
RuleSet_Classical: &RuleSet_Classical
  type: http
  behavior: classical
  interval: 86400
  format: text

RuleSet_Domain: &RuleSet_Domain
  type: http
  behavior: domain
  interval: 86400
  format: text

RuleSet_IpCidr: &RuleSet_IpCidr
  type: http
  behavior: ipcidr
  interval: 86400
  format: text

RuleSet_Yaml: &RuleSet_Yaml
  type: http
  behavior: classical
  interval: 86400
  format: yaml

rule-providers:
  # å¹¿å‘Š
  reject_non_ip:
    <<: *RuleSet_Classical
    url: https://ruleset.skk.moe/Clash/non_ip/reject.txt
    path: ./ruleset/reject_non_ip.txt
  reject_domainset:
    <<: *RuleSet_Domain
    url: https://ruleset.skk.moe/Clash/domainset/reject.txt
    path: ./ruleset/reject_domainset.txt
  reject_non_ip_drop:
    <<: *RuleSet_Classical
    url: https://ruleset.skk.moe/Clash/non_ip/reject-drop.txt
    path: ./ruleset/reject_non_ip_drop.txt
  reject_non_ip_no_drop:
    <<: *RuleSet_Classical
    url: https://ruleset.skk.moe/Clash/non_ip/reject-no-drop.txt
    path: ./ruleset/reject_non_ip_no_drop.txt
  reject_ip:
    <<: *RuleSet_Classical
    url: https://ruleset.skk.moe/Clash/ip/reject.txt
    path: ./ruleset/reject_ip.txt

  # CDN/ä¸‹è½½
  cdn_domainset:
    <<: *RuleSet_Domain
    url: https://ruleset.skk.moe/Clash/domainset/cdn.txt
    path: ./ruleset/cdn_domainset.txt
  cdn_non_ip:
    <<: *RuleSet_Domain
    url: https://ruleset.skk.moe/Clash/non_ip/cdn.txt
    path: ./ruleset/cdn_non_ip.txt
  download_domainset:
    <<: *RuleSet_Domain
    url: https://ruleset.skk.moe/Clash/domainset/download.txt
    path: ./ruleset/download_domainset.txt
  download_non_ip:
    <<: *RuleSet_Domain
    url: https://ruleset.skk.moe/Clash/non_ip/download.txt
    path: ./ruleset/download_non_ip.txt

  # AI
  ai_non_ip:
    <<: *RuleSet_Classical
    url: https://ruleset.skk.moe/Clash/non_ip/ai.txt
    path: ./ruleset/ai_non_ip.txt
  OpenAi:
    <<: *RuleSet_Yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/OpenAI/OpenAI.yaml
    path: ./ruleset/OpenAi.yaml
  Copilot:
    <<: *RuleSet_Yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Copilot/Copilot.yaml
    path: ./ruleset/Copilot.yaml
  Anthropic:
    <<: *RuleSet_Yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Anthropic/Anthropic.yaml
    path: ./ruleset/Anthropic.yaml
  Claude:
    <<: *RuleSet_Yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Claude/Claude.yaml
    path: ./ruleset/Claude.yaml
  Gemini:
    <<: *RuleSet_Yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Gemini/Gemini.yaml
    path: ./ruleset/Gemini.yaml

  # åŸºç¡€æœåŠ¡
  Google:
    <<: *RuleSet_Yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Google/Google.yaml
    path: ./ruleset/Google.yaml
  Github:
    <<: *RuleSet_Yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/GitHub/GitHub.yaml
    path: ./ruleset/Github.yaml

  # Telegram
  telegram_non_ip:
    <<: *RuleSet_Classical
    url: https://ruleset.skk.moe/Clash/non_ip/telegram.txt
    path: ./ruleset/telegram_non_ip.txt
  telegram_ip:
    <<: *RuleSet_Classical
    url: https://ruleset.skk.moe/Clash/ip/telegram.txt
    path: ./ruleset/telegram_ip.txt

  # Apple
  apple_cdn:
    <<: *RuleSet_Domain
    url: https://ruleset.skk.moe/Clash/domainset/apple_cdn.txt
    path: ./ruleset/apple_cdn.txt
  apple_services:
    <<: *RuleSet_Classical
    url: https://ruleset.skk.moe/Clash/non_ip/apple_services.txt
    path: ./ruleset/apple_services.txt
  apple_cn_non_ip:
    <<: *RuleSet_Classical
    url: https://ruleset.skk.moe/Clash/non_ip/apple_cn.txt
    path: ./ruleset/apple_cn_non_ip.txt

  # Microsoft
  microsoft_cdn_non_ip:
    <<: *RuleSet_Classical
    url: https://ruleset.skk.moe/Clash/non_ip/microsoft_cdn.txt
    path: ./ruleset/microsoft_cdn_non_ip.txt
  microsoft_non_ip:
    <<: *RuleSet_Classical
    url: https://ruleset.skk.moe/Clash/non_ip/microsoft.txt
    path: ./ruleset/microsoft_non_ip.txt

  # Media
  BiliBili:
    <<: *RuleSet_Yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/BiliBili/BiliBili.yaml
    path: ./ruleset/BiliBili.yaml
  Bahamut:
    <<: *RuleSet_Yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Bahamut/Bahamut.yaml
    path: ./ruleset/Bahamut.yaml
  stream_non_ip:
    <<: *RuleSet_Classical
    url: https://ruleset.skk.moe/Clash/non_ip/stream.txt
    path: ./ruleset/stream_non_ip.txt
  stream_ip:
    <<: *RuleSet_Classical
    url: https://ruleset.skk.moe/Clash/ip/stream.txt
    path: ./ruleset/stream_ip.txt

  # Gaming
  Game:
    <<: *RuleSet_Yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Game/Game.yaml
    path: ./ruleset/Game.yaml

  # Regions
  lan_non_ip:
    <<: *RuleSet_Classical
    url: https://ruleset.skk.moe/Clash/non_ip/lan.txt
    path: ./ruleset/lan_non_ip.txt
  lan_ip:
    <<: *RuleSet_Classical
    url: https://ruleset.skk.moe/Clash/ip/lan.txt
    path: ./ruleset/lan_ip.txt
  domestic_non_ip:
    <<: *RuleSet_Classical
    url: https://ruleset.skk.moe/Clash/non_ip/domestic.txt
    path: ./ruleset/domestic_non_ip.txt
  direct_non_ip:
    <<: *RuleSet_Classical
    url: https://ruleset.skk.moe/Clash/non_ip/direct.txt
    path: ./ruleset/direct_non_ip.txt
  domestic_ip:
    <<: *RuleSet_Classical
    url: https://ruleset.skk.moe/Clash/ip/domestic.txt
    path: ./ruleset/domestic_ip.txt
  china_ip:
    <<: *RuleSet_IpCidr
    url: https://ruleset.skk.moe/Clash/ip/china_ip.txt
    path: ./ruleset/china_ip.txt
  global_non_ip:
    <<: *RuleSet_Classical
    url: https://ruleset.skk.moe/Clash/non_ip/global.txt
    path: ./ruleset/global_non_ip.txt

# **=============================== åˆ†æµè§„åˆ™ ===============================**
rules:
  # --- Tailscale & ç›´è¿ä¼˜å…ˆ ---
  - PROCESS-NAME,tailscale.exe,DIRECT
  - PROCESS-NAME,tailscaled.exe,DIRECT
  - PROCESS-NAME,tailscaled,DIRECT
  - IP-CIDR,100.65.0.0/10,DIRECT,no-resolve
  - DOMAIN-SUFFIX,ts.net,DIRECT

  # --- è‡ªå®šä¹‰ä»£ç† ---
  - DOMAIN-SUFFIX,coze.com,ğŸŒ å…¨çƒåŠ é€Ÿ
  - DOMAIN-SUFFIX,linux.do,ğŸŒ å…¨çƒåŠ é€Ÿ
  - DOMAIN-SUFFIX,ldstatic.com,ğŸŒ å…¨çƒåŠ é€Ÿ
  - DOMAIN-SUFFIX,qinzhiai.com,ğŸŒ å…¨çƒåŠ é€Ÿ
  - DOMAIN-SUFFIX,makerworld.com,ğŸŒ å…¨çƒåŠ é€Ÿ
  - DOMAIN-SUFFIX,openlist.team,ğŸŒ å…¨çƒåŠ é€Ÿ
  - DOMAIN-SUFFIX,marketplace.jetbrains.com,ğŸŒ å…¨çƒåŠ é€Ÿ

  # --- å¹¿å‘Šæ‹¦æˆª ---
  - RULE-SET,reject_non_ip,REJECT
  - RULE-SET,reject_domainset,REJECT
  - RULE-SET,reject_non_ip_drop,REJECT-DROP
  - RULE-SET,reject_non_ip_no_drop,REJECT
  - RULE-SET,reject_ip,REJECT

  # --- CDN/ä¸‹è½½ ---
  - RULE-SET,download_domainset,DIRECT
  - RULE-SET,download_non_ip,DIRECT
  - RULE-SET,cdn_domainset,ğŸ¯ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,cdn_non_ip,ğŸ¯ èŠ‚ç‚¹é€‰æ‹©

  # --- AI æœåŠ¡ (antigravity) ---
  - DOMAIN-KEYWORD,antigravity,ğŸ¤– äººå·¥æ™ºèƒ½
  - DOMAIN-SUFFIX,grok.com,ğŸ¤– äººå·¥æ™ºèƒ½
  - DOMAIN-SUFFIX,cici.com,ğŸ¤– äººå·¥æ™ºèƒ½
  - DOMAIN-SUFFIX,instcopilot-api.com,ğŸ¤– äººå·¥æ™ºèƒ½
  - DOMAIN-SUFFIX,oochat.space,ğŸ¤– äººå·¥æ™ºèƒ½
  - DOMAIN-SUFFIX,trae.ai,ğŸ¤– äººå·¥æ™ºèƒ½
  - DOMAIN-SUFFIX,marscode.com,ğŸ¤– äººå·¥æ™ºèƒ½
  - DOMAIN-SUFFIX,lmarena.ai,ğŸ¤– äººå·¥æ™ºèƒ½
  - RULE-SET,OpenAi,ğŸ¤– äººå·¥æ™ºèƒ½
  - RULE-SET,Copilot,ğŸ¤– äººå·¥æ™ºèƒ½
  - RULE-SET,Gemini,ğŸ¤– äººå·¥æ™ºèƒ½
  - RULE-SET,Anthropic,ğŸ¤– äººå·¥æ™ºèƒ½
  - RULE-SET,Claude,ğŸ¤– äººå·¥æ™ºèƒ½
  - RULE-SET,ai_non_ip,ğŸ¤– äººå·¥æ™ºèƒ½

  # --- Google ---
  - RULE-SET,Google,ğŸ¯ èŠ‚ç‚¹é€‰æ‹©

  # --- Telegram ---
  - RULE-SET,telegram_non_ip,âœˆï¸ ç”µæŠ¥æ¶ˆæ¯
  - RULE-SET,telegram_ip,âœˆï¸ ç”µæŠ¥æ¶ˆæ¯

  # --- Apple ---
  - RULE-SET,apple_cdn,DIRECT
  - RULE-SET,apple_cn_non_ip,DIRECT
  - RULE-SET,apple_services,ğŸ è‹¹æœæœåŠ¡

  # --- Microsoft ---
  - RULE-SET,microsoft_cdn_non_ip,DIRECT
  - RULE-SET,microsoft_non_ip,â“‚ï¸ å¾®è½¯æœåŠ¡

  # --- Github & Game ---
  - RULE-SET,Github,ğŸŒ å…¨çƒåŠ é€Ÿ
  - RULE-SET,Game,ğŸ® æ¸¸æˆå¹³å°

  # --- Media ---
  - RULE-SET,BiliBili,ğŸ“º å“”å“©å“”å“©
  - RULE-SET,Bahamut,ğŸ“º å“”å“©å“”å“©
  - RULE-SET,stream_non_ip,ğŸ¬ å›½é™…åª’ä½“
  - RULE-SET,stream_ip,ğŸ¬ å›½é™…åª’ä½“

  # --- Global ---
  - RULE-SET,global_non_ip,ğŸŒ å…¨çƒåŠ é€Ÿ

  # --- Domestic/Direct ---
  - RULE-SET,domestic_non_ip,DIRECT
  - RULE-SET,direct_non_ip,DIRECT
  - RULE-SET,lan_non_ip,DIRECT
  - RULE-SET,lan_ip,DIRECT
  - RULE-SET,domestic_ip,DIRECT
  - RULE-SET,china_ip,DIRECT
  - GEOIP,private,DIRECT
  - GEOIP,CN,DIRECT

  # --- Fallback ---
  - MATCH,ğŸ¯ å…œåº•åˆ†æµ
