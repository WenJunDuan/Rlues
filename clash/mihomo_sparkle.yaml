# ==========================================
# Mihomo ç»ˆæé…ç½® - ä¼˜åŒ–ç‰ˆ
# åŸºäº: åŸé…ç½® + Tailscale å…¼å®¹ä¿®å¤ + æ€§èƒ½ä¼˜åŒ–
# Date: 2026-02-11
# ==========================================
#
# ====== æœ¬æ¬¡ä¼˜åŒ–å˜æ›´æ‘˜è¦ ======
#
# [CRITICAL] ä¿®å¤é¡¹:
#   1. åˆ é™¤ global-client-fingerprint (å·²åºŸå¼ƒï¼Œæ—¥å¿—åå¤è­¦å‘Š)
#   2. fallback DNS åŠ  #ç­–ç•¥ç»„ åç¼€ (æ¶ˆé™¤ 8.8.8.8/1.1.1.1 è¶…æ—¶é£æš´) -- å·²åœ¨ä¸Šè½®ä¿®å¤
#   3. TUN åŠ  inet4-route-exclude-address (Tailscale CGNAT ç»•è¿‡) -- å·²åœ¨ä¸Šè½®ä¿®å¤
#   4. sniffer åŠ  skip-dst-address (Tailscale æµé‡ä¸å—…æ¢) -- å·²åœ¨ä¸Šè½®ä¿®å¤
#
# [PERF] æ€§èƒ½ä¼˜åŒ–:
#   5. è§„åˆ™é‡æ’: LAN/ç§æœ‰IPè§„åˆ™å‰ç½®ï¼Œå‡å°‘æ¯ä¸ªæœ¬åœ°è¿æ¥çš„è§„åˆ™éå†å¼€é”€
#   6. æ–°å¢ DNS æœåŠ¡å™¨ IP æ˜¾å¼ä»£ç†è§„åˆ™ï¼Œé¿å…è½å…¥å…œåº•åˆ†æµè¶…æ—¶
#   7. åˆ é™¤æœªä½¿ç”¨çš„ YAML é”šç‚¹ (RulesetDomain, RulesetIP)ï¼Œå‡å°‘è§£æå¼€é”€
#   8. skip-auth-prefixes åŠ å…¥ Tailscale CGNAT æ®µ
#
# [ENHANCE] åŠŸèƒ½å¢å¼º:
#   9. AI æœåŠ¡åŸŸåè¡¥å…¨ (DeepSeek, Windsurf, v0.dev ç­‰ 2025-2026 æ–°æœåŠ¡)
#  10. fallback DNS æ¢å¤ TLS åè®®å¤‡ä»½ï¼Œæå‡åè®®å¤šæ ·æ€§
#  11. fake-ip-filter è¡¥å…¨ STUN/NTP æ¨¡å¼
#
# [CLEANUP] æ¸…ç†:
#  12. åˆ é™¤ geodata-loader: memconservative (è¢« nikki è¦†ç›–ä¸º standardï¼Œå†™äº†ä¹Ÿæ²¡ç”¨)
#  13. æ³¨é‡Šè¯´æ˜ nikki æ’ä»¶ä¸æ‰‹åŠ¨é…ç½®çš„ä¼˜å…ˆçº§å…³ç³»
#
# ==========================================

# ==================== é”šç‚¹é…ç½® ====================
BaseFB:
  &BaseFB {
    type: fallback,
    interval: 300,
    lazy: true,
    url: "https://www.gstatic.com/generate_204",
  }
BaseCH:
  &BaseCH {
    type: load-balance,
    interval: 300,
    lazy: true,
    url: "https://www.gstatic.com/generate_204",
    strategy: consistent-hashing,
  }
BaseCR:
  &BaseCR {
    type: load-balance,
    interval: 300,
    lazy: true,
    url: "https://www.gstatic.com/generate_204",
    strategy: round-robin,
  }
BaseUT:
  &BaseUT {
    type: url-test,
    interval: 300,
    tolerance: 50,
    lazy: true,
    url: "https://www.gstatic.com/generate_204",
  }

# èŠ‚ç‚¹ç­›é€‰æ­£åˆ™
FilterHK: &FilterHK "^(?=.*(?i)(æ¸¯|ğŸ‡­ğŸ‡°|HK|Hong|HKG))(?!.*(æ¸¸æˆ|GAME|5x)).*$"
FilterSG: &FilterSG "^(?=.*(?i)(å¡|ğŸ‡¸ğŸ‡¬|SG|Sing|SIN|XSP))(?!.*(æ¸¸æˆ|GAME|5x)).*$"
FilterJP: &FilterJP "^(?=.*(?i)(æ—¥|ğŸ‡¯ğŸ‡µ|JP|Japan|NRT|HND|KIX|CTS|FUK))(?!.*(æ¸¸æˆ|GAME|5x)).*$"
FilterUS: &FilterUS "^(?=.*(?i)(ç¾|ğŸ‡ºğŸ‡¸|US|USA|SJC|JFK|LAX|ORD|ATL|DFW|SFO|MIA|SEA|IAD))(?!.*(æ¸¸æˆ|GAME|5x)).*$"
FilterTW: &FilterTW "^(?=.*(?i)(å°|è‡º|ğŸ‡¹ğŸ‡¼|TW|Taiwan|Taipei|Taichung|Tainan|Kaohsiung|TPE|TSA|KHH|RMQ|TNN|æ–°ç«¹|æ¡ƒå›­|æ¡ƒåœ’|å½°åŒ–|é«˜é›„|å°åŒ—|å°ä¸­|å°å—|Hsinchu|Taoyuan))(?!.*(æ¸¸æˆ|GAME|5x)).*$"
FilterEU: &FilterEU "^(?=.*(?i)(è‹±|æ³•|å¾·|è·|æ„|è¥¿|ç‘|èŠ¬|ä¸¹|æŒª|æ³¢|ğŸ‡¬ğŸ‡§|ğŸ‡«ğŸ‡·|ğŸ‡©ğŸ‡ª|ğŸ‡³ğŸ‡±|ğŸ‡®ğŸ‡¹|ğŸ‡ªğŸ‡¸|ğŸ‡¨ğŸ‡­|CDG|FRA|AMS|LHR|MUC))(?!.*(æ¸¸æˆ|GAME|5x)).*$"
FilterOT: &FilterOT "^(?!.*(DIRECT|ç›´è¿|ç¾|æ¸¯|å¡|å°|è‡º|æ–°|æ—¥|è‹±|æ³•|å¾·|ğŸ‡­ğŸ‡°|ğŸ‡¹ğŸ‡¼|ğŸ‡¸ğŸ‡¬|ğŸ‡¯ğŸ‡µ|ğŸ‡ºğŸ‡¸|ğŸ‡¬ğŸ‡§|HK|TW|SG|JP|US|GB|Taiwan|Taipei))"
FilterAL: &FilterAL "^(?!.*(DIRECT|ç›´è¿|ç¾¤|é‚€è¯·|è¿”åˆ©|å¾ªç¯|å®˜ç½‘|å®¢æœ|ç½‘ç«™|è¿‡æœŸ|åˆ°æœŸ|æµé‡|USE|USED|TOTAL|EXPIRE))"

# ç­–ç•¥ç»„ä»£ç†åˆ—è¡¨æ¨¡æ¿
SelectFB:
  &SelectFB {
    type: select,
    proxies:
      [
        æ•…éšœè½¬ç§»,
        é¦™æ¸¯ç­–ç•¥,
        ç‹®åŸç­–ç•¥,
        æ—¥æœ¬ç­–ç•¥,
        ç¾å›½ç­–ç•¥,
        å°æ¹¾ç­–ç•¥,
        æ¬§ç›Ÿç­–ç•¥,
        å†·é—¨èŠ‚ç‚¹,
        å…¨éƒ¨èŠ‚ç‚¹,
        DIRECT,
      ],
  }
SelectPY:
  &SelectPY {
    type: select,
    proxies:
      [
        ğŸ¯ èŠ‚ç‚¹é€‰æ‹©,
        æ•…éšœè½¬ç§»,
        é¦™æ¸¯ç­–ç•¥,
        ç‹®åŸç­–ç•¥,
        æ—¥æœ¬ç­–ç•¥,
        ç¾å›½ç­–ç•¥,
        å°æ¹¾ç­–ç•¥,
        æ¬§ç›Ÿç­–ç•¥,
        å†·é—¨èŠ‚ç‚¹,
        å…¨éƒ¨èŠ‚ç‚¹,
        DIRECT,
      ],
  }
SelectDC:
  &SelectDC {
    type: select,
    proxies:
      [DIRECT, ğŸ¯ èŠ‚ç‚¹é€‰æ‹©, æ•…éšœè½¬ç§», é¦™æ¸¯ç­–ç•¥, ç‹®åŸç­–ç•¥, æ—¥æœ¬ç­–ç•¥, ç¾å›½ç­–ç•¥],
  }
SelectUS:
  &SelectUS {
    type: select,
    proxies:
      [
        ç¾å›½ç­–ç•¥,
        ğŸ¯ èŠ‚ç‚¹é€‰æ‹©,
        æ•…éšœè½¬ç§»,
        ç‹®åŸç­–ç•¥,
        æ—¥æœ¬ç­–ç•¥,
        é¦™æ¸¯ç­–ç•¥,
        å°æ¹¾ç­–ç•¥,
        æ¬§ç›Ÿç­–ç•¥,
        DIRECT,
      ],
  }
SelectSG:
  &SelectSG {
    type: select,
    proxies:
      [
        ç‹®åŸç­–ç•¥,
        ğŸ¯ èŠ‚ç‚¹é€‰æ‹©,
        æ•…éšœè½¬ç§»,
        é¦™æ¸¯ç­–ç•¥,
        æ—¥æœ¬ç­–ç•¥,
        ç¾å›½ç­–ç•¥,
        å°æ¹¾ç­–ç•¥,
        æ¬§ç›Ÿç­–ç•¥,
        DIRECT,
      ],
  }

# è§„åˆ™é›†æ¨¡æ¿
RulesetDomain:
  &RulesetDomain { type: http, behavior: domain, format: mrs, interval: 86400 }
RulesetIP:
  &RulesetIP { type: http, behavior: ipcidr, format: mrs, interval: 86400 }
RulesetClassical:
  &RulesetClassical {
    type: http,
    behavior: classical,
    format: text,
    interval: 86400,
  }
RulesetYaml:
  &RulesetYaml {
    type: http,
    behavior: classical,
    format: yaml,
    interval: 86400,
  }

# **=============================== æ ¸å¿ƒé…ç½® ===============================**
port: 7893
socks-port: 7891
redir-port: 7892
mixed-port: 7890
tproxy-port: 7894
allow-lan: true
mode: rule
bind-address: "*"
ipv6: false
unified-delay: true
tcp-concurrent: true
log-level: warning
find-process-mode: strict
# [CRITICAL] å·²åˆ é™¤ global-client-fingerprint: chrome
# è¯¥é…ç½®é¡¹å·²åºŸå¼ƒï¼Œæ—¥å¿—åå¤è¾“å‡º deprecation warning
# å¦‚éœ€æŒ‡å®š TLS æŒ‡çº¹ï¼Œåœ¨ proxy-provider æˆ–å•ä¸ªèŠ‚ç‚¹é…ç½®ä¸­è®¾ç½® client-fingerprint: chrome

keep-alive-interval: 30
keep-alive-idle: 600

# [ENHANCE] skip-auth-prefixes åŠ å…¥ Tailscale CGNAT æ®µ
# å…è®¸ Tailscale ç½‘ç»œå†…çš„è®¾å¤‡å…è®¤è¯è®¿é—® mihomo çš„ LAN ä»£ç†
skip-auth-prefixes:
  - 127.0.0.1/8
  - 192.168.0.0/16
  - 10.0.0.0/8
  - 100.64.0.0/10

external-controller: 0.0.0.0:9090
secret: "your-secret-123456QWer!@"
external-ui: ui
external-ui-name: zashboard
external-ui-url: https://github.com/Zephyruso/zashboard/releases/latest/download/dist.zip

profile:
  store-selected: true
  store-fake-ip: true

# GEO æ•°æ®é…ç½®
# [CLEANUP] åˆ é™¤äº† geodata-loader: memconservative
# åŸå› : nikki æ’ä»¶ (/etc/nikki/run/config.yaml) ä¼šè¦†ç›–æ­¤å€¼ä¸º standard
# å¦‚éœ€ä¿®æ”¹ï¼Œè¯·åœ¨ nikki çš„ Web UI (LuCI) ä¸­è®¾ç½®
geodata-mode: true
geo-auto-update: true
geo-update-interval: 48
geox-url:
  geoip: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geoip.dat"
  geosite: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geosite.dat"
  mmdb: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geoip.metadb"
  asn: "https://github.com/xishang0128/geoip/releases/download/latest/GeoLite2-ASN.mmdb"

# **=============================== åŸŸåå—…æ¢ ===============================**
sniffer:
  enable: true
  force-dns-mapping: true
  parse-pure-ip: true
  override-destination: true
  # [CRITICAL] Tailscale CGNAT åœ°å€ä¸å—…æ¢ï¼Œé˜²æ­¢ override-destination å¹²æ‰°éš§é“æµé‡
  skip-dst-address:
    - 100.64.0.0/10
  sniff:
    HTTP:
      ports: [80, 8080-8880]
      override-destination: true
    TLS:
      ports: [443, 8443]
    QUIC:
      ports: [443, 8443]
  force-domain:
    - "+.v2ex.com"
    - "+.netflix.com"
    - "+.nflxvideo.net"
  skip-domain:
    - "Mijia Cloud"
    - "+.push.apple.com"

# **=============================== TUN é…ç½® ===============================**
tun:
  enable: true
  stack: mixed
  device: Mihomo
  auto-route: true
  auto-redirect: true
  auto-detect-interface: true
  strict-route: true
  dns-hijack:
    - any:53
    - tcp://any:53
  mtu: 1500
  gso: true
  gso-max-size: 65536
  udp-timeout: 300
  # [CRITICAL] Tailscale CGNAT åœ°å€æ®µå®Œå…¨ç»•è¿‡ TUN è·¯ç”±æ•è·
  # route-exclude-address æ˜¯æ—§ç‰ˆå‚æ•°åï¼Œinet4-route-exclude-address æ˜¯æ–°ç‰ˆ
  # ä¸¤ä¸ªéƒ½å†™ï¼Œç¡®ä¿ä¸åŒç‰ˆæœ¬ mihomo éƒ½èƒ½ç”Ÿæ•ˆ
  route-exclude-address:
    - 100.64.0.0/10
  inet4-route-exclude-address:
    - 100.64.0.0/10
  exclude-interface:
    - tailscale0
    - utun*
    - "Tailscale*"

# **=============================== DNS é…ç½® ===============================**
dns:
  enable: true
  ipv6: false
  listen: 0.0.0.0:53
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  respect-rules: true
  prefer-h3: true
  use-hosts: true
  use-system-hosts: true
  cache-algorithm: arc

  fake-ip-filter:
    - "*.lan"
    - "localhost.ptlogin2.qq.com"
    - "+.srv.nintendo.net"
    - "+.stun.playstation.net"
    - "+.msftconnecttest.com"
    - "+.msftncsi.com"
    - "+.xboxlive.com"
    - "msftconnecttest.com"
    - "xbox.*.microsoft.com"
    - "*.battlenet.com.cn"
    - "*.battlenet.com"
    - "*.blzstatic.cn"
    - "*.battle.net"
    # Tailscale
    - "*.ts.net"
    - "100.64.0.0/10"
    - "tailscale.com"
    - "+.local"
    - "+.home.arpa"
    # [ENHANCE] NTP/STUN æ¨¡å¼è¡¥å…¨ï¼Œé˜²æ­¢æ—¶é—´åŒæ­¥å’Œ WebRTC æ‰“æ´è¢« fake-ip å¹²æ‰°
    - "time.*.com"
    - "time.*.gov"
    - "time.*.edu.cn"
    - "ntp.*.com"
    - "+.pool.ntp.org"
    - "time.nist.gov"
    - "stun.*.*"
    - "stun.*.*.*"
    - "+.stun.*.*"

  proxy-server-nameserver:
    - https://dns.alidns.com/dns-query
    - https://doh.pub/dns-query

  default-nameserver:
    - 223.5.5.5
    - 119.29.29.29

  nameserver:
    - https://dns.alidns.com/dns-query
    - https://doh.pub/dns-query

  nameserver-policy:
    "*.ts.net,tailscale.com": system
    "geosite:cn,private":
      - https://dns.alidns.com/dns-query
      - https://doh.pub/dns-query

  # [CRITICAL] fallback DNS é€šè¿‡ä»£ç†å‡ºç«™ï¼Œé¿å…åœ¨å›½å†…ç›´è¿ 8.8.8.8/1.1.1.1 è¢«å¢™å¯¼è‡´è¶…æ—¶é£æš´
  # [ENHANCE] æ¢å¤ TLS åè®®ä½œä¸ºç¬¬ä¸‰å¤‡ä»½ï¼Œæå‡åè®®å¤šæ ·æ€§ï¼ˆDoH è¢«å¹²æ‰°æ—¶ DoT å¯èƒ½å­˜æ´»ï¼‰
  fallback:
    - "https://1.1.1.1/dns-query#ğŸ¯ èŠ‚ç‚¹é€‰æ‹©"
    - "https://dns.google/dns-query#ğŸ¯ èŠ‚ç‚¹é€‰æ‹©"
    - "tls://8.8.8.8:853#ğŸ¯ èŠ‚ç‚¹é€‰æ‹©"

  fallback-filter:
    geoip: true
    geoip-code: CN
    ipcidr:
      - 240.0.0.0/4
      - 0.0.0.0/32
      - 127.0.0.1/32
    domain:
      - "+.google.com"
      - "+.facebook.com"
      - "+.youtube.com"
      - "+.twitter.com"
      - "+.github.com"

# **=============================== ç­–ç•¥ç»„é…ç½® ===============================**
proxy-groups:
  - {
      name: ğŸ¯ èŠ‚ç‚¹é€‰æ‹©,
      <<: *SelectFB,
      icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Static.png,
    }
  - {
      name: æ•…éšœè½¬ç§»,
      <<: *BaseFB,
      proxies:
        [
          é¦™æ¸¯ç­–ç•¥,
          ç‹®åŸç­–ç•¥,
          æ—¥æœ¬ç­–ç•¥,
          ç¾å›½ç­–ç•¥,
          å°æ¹¾ç­–ç•¥,
          æ¬§ç›Ÿç­–ç•¥,
          å…¨éƒ¨èŠ‚ç‚¹,
          DIRECT,
        ],
      icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Available.png,
    }
  - {
      name: ğŸŒ å…¨çƒåŠ é€Ÿ,
      <<: *SelectPY,
      icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Global.png,
    }
  - {
      name: ğŸ  å›½å†…æµé‡,
      <<: *SelectDC,
      icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/China.png,
    }
  - {
      name: ğŸŸ å…œåº•åˆ†æµ,
      <<: *SelectPY,
      icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Final.png,
    }
  - {
      name: ğŸ¤– äººå·¥æ™ºèƒ½,
      <<: *SelectUS,
      icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Bot.png,
    }
  - {
      name: âœˆï¸ ç”µæŠ¥æ¶ˆæ¯,
      <<: *SelectSG,
      icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Telegram_X.png,
    }
  - {
      name: ğŸ¬ å›½é™…åª’ä½“,
      <<: *SelectPY,
      icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/YouTube.png,
    }
  - {
      name: ğŸ” è°·æ­ŒæœåŠ¡,
      <<: *SelectPY,
      icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Google_Search.png,
    }
  - {
      name: â“‚ï¸ å¾®è½¯æœåŠ¡,
      <<: *SelectPY,
      icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Microsoft.png,
    }
  - {
      name: ğŸ è‹¹æœæœåŠ¡,
      <<: *SelectDC,
      icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Apple.png,
    }
  - {
      name: ğŸ® æ¸¸æˆå¹³å°,
      <<: *SelectDC,
      icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Game.png,
    }
  - {
      name: ğŸ’³ PayPal,
      <<: *SelectUS,
      icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/PayPal.png,
    }
  - {
      name: ğŸª™ åŠ å¯†è´§å¸,
      <<: *SelectSG,
      icon: https://raw.githubusercontent.com/Orz-3/mini/master/Alpha/Bitcloud.png,
    }

  # åœ°åŒºç­–ç•¥ç»„
  - {
      name: é¦™æ¸¯ç­–ç•¥,
      type: select,
      proxies: [é¦™æ¸¯è‡ªåŠ¨, é¦™æ¸¯å‡è¡¡-æ•£åˆ—, é¦™æ¸¯å‡è¡¡-è½®è¯¢],
      include-all: true,
      filter: *FilterHK,
      icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Hong_Kong.png,
    }
  - {
      name: å°æ¹¾ç­–ç•¥,
      type: select,
      proxies: [å°æ¹¾è‡ªåŠ¨, å°æ¹¾å‡è¡¡-æ•£åˆ—, å°æ¹¾å‡è¡¡-è½®è¯¢],
      include-all: true,
      filter: *FilterTW,
      icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Taiwan.png,
    }
  - {
      name: ç‹®åŸç­–ç•¥,
      type: select,
      proxies: [ç‹®åŸè‡ªåŠ¨, ç‹®åŸå‡è¡¡-æ•£åˆ—, ç‹®åŸå‡è¡¡-è½®è¯¢],
      include-all: true,
      filter: *FilterSG,
      icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Singapore.png,
    }
  - {
      name: æ—¥æœ¬ç­–ç•¥,
      type: select,
      proxies: [æ—¥æœ¬è‡ªåŠ¨, æ—¥æœ¬å‡è¡¡-æ•£åˆ—, æ—¥æœ¬å‡è¡¡-è½®è¯¢],
      include-all: true,
      filter: *FilterJP,
      icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Japan.png,
    }
  - {
      name: ç¾å›½ç­–ç•¥,
      type: select,
      proxies: [ç¾å›½è‡ªåŠ¨, ç¾å›½å‡è¡¡-æ•£åˆ—, ç¾å›½å‡è¡¡-è½®è¯¢],
      include-all: true,
      filter: *FilterUS,
      icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/United_States.png,
    }
  - {
      name: æ¬§ç›Ÿç­–ç•¥,
      type: select,
      proxies: [æ¬§ç›Ÿè‡ªåŠ¨, æ¬§ç›Ÿå‡è¡¡-æ•£åˆ—, æ¬§ç›Ÿå‡è¡¡-è½®è¯¢],
      include-all: true,
      filter: *FilterEU,
      icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/European_Union.png,
    }

  - {
      name: å†·é—¨èŠ‚ç‚¹,
      type: select,
      include-all: true,
      filter: *FilterOT,
      icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/World_Map.png,
    }
  - {
      name: å…¨éƒ¨èŠ‚ç‚¹,
      type: select,
      include-all: true,
      filter: *FilterAL,
      icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Rocket.png,
    }

  # è‡ªåŠ¨æµ‹é€Ÿç»„
  - {
      name: é¦™æ¸¯è‡ªåŠ¨,
      <<: *BaseUT,
      include-all: true,
      filter: *FilterHK,
      hidden: true,
    }
  - {
      name: å°æ¹¾è‡ªåŠ¨,
      <<: *BaseUT,
      include-all: true,
      filter: *FilterTW,
      hidden: true,
    }
  - {
      name: ç‹®åŸè‡ªåŠ¨,
      <<: *BaseUT,
      include-all: true,
      filter: *FilterSG,
      hidden: true,
    }
  - {
      name: æ—¥æœ¬è‡ªåŠ¨,
      <<: *BaseUT,
      include-all: true,
      filter: *FilterJP,
      hidden: true,
    }
  - {
      name: ç¾å›½è‡ªåŠ¨,
      <<: *BaseUT,
      include-all: true,
      filter: *FilterUS,
      hidden: true,
    }
  - {
      name: æ¬§ç›Ÿè‡ªåŠ¨,
      <<: *BaseUT,
      include-all: true,
      filter: *FilterEU,
      hidden: true,
    }

  # è´Ÿè½½å‡è¡¡-æ•£åˆ—
  - {
      name: é¦™æ¸¯å‡è¡¡-æ•£åˆ—,
      <<: *BaseCH,
      include-all: true,
      filter: *FilterHK,
      hidden: true,
    }
  - {
      name: å°æ¹¾å‡è¡¡-æ•£åˆ—,
      <<: *BaseCH,
      include-all: true,
      filter: *FilterTW,
      hidden: true,
    }
  - {
      name: ç‹®åŸå‡è¡¡-æ•£åˆ—,
      <<: *BaseCH,
      include-all: true,
      filter: *FilterSG,
      hidden: true,
    }
  - {
      name: æ—¥æœ¬å‡è¡¡-æ•£åˆ—,
      <<: *BaseCH,
      include-all: true,
      filter: *FilterJP,
      hidden: true,
    }
  - {
      name: ç¾å›½å‡è¡¡-æ•£åˆ—,
      <<: *BaseCH,
      include-all: true,
      filter: *FilterUS,
      hidden: true,
    }
  - {
      name: æ¬§ç›Ÿå‡è¡¡-æ•£åˆ—,
      <<: *BaseCH,
      include-all: true,
      filter: *FilterEU,
      hidden: true,
    }

  # è´Ÿè½½å‡è¡¡-è½®è¯¢
  - {
      name: é¦™æ¸¯å‡è¡¡-è½®è¯¢,
      <<: *BaseCR,
      include-all: true,
      filter: *FilterHK,
      hidden: true,
    }
  - {
      name: å°æ¹¾å‡è¡¡-è½®è¯¢,
      <<: *BaseCR,
      include-all: true,
      filter: *FilterTW,
      hidden: true,
    }
  - {
      name: ç‹®åŸå‡è¡¡-è½®è¯¢,
      <<: *BaseCR,
      include-all: true,
      filter: *FilterSG,
      hidden: true,
    }
  - {
      name: æ—¥æœ¬å‡è¡¡-è½®è¯¢,
      <<: *BaseCR,
      include-all: true,
      filter: *FilterJP,
      hidden: true,
    }
  - {
      name: ç¾å›½å‡è¡¡-è½®è¯¢,
      <<: *BaseCR,
      include-all: true,
      filter: *FilterUS,
      hidden: true,
    }
  - {
      name: æ¬§ç›Ÿå‡è¡¡-è½®è¯¢,
      <<: *BaseCR,
      include-all: true,
      filter: *FilterEU,
      hidden: true,
    }

# **=============================== è§„åˆ™æä¾›è€… ===============================**
rule-providers:
  reject_non_ip:
    {
      <<: *RulesetClassical,
      url: "https://ruleset.skk.moe/Clash/non_ip/reject.txt",
      path: ./ruleset/reject_non_ip.txt,
    }
  reject_domainset:
    {
      type: http,
      behavior: domain,
      format: text,
      interval: 86400,
      url: "https://ruleset.skk.moe/Clash/domainset/reject.txt",
      path: ./ruleset/reject_domainset.txt,
    }
  reject_non_ip_drop:
    {
      <<: *RulesetClassical,
      url: "https://ruleset.skk.moe/Clash/non_ip/reject-drop.txt",
      path: ./ruleset/reject_non_ip_drop.txt,
    }
  reject_non_ip_no_drop:
    {
      <<: *RulesetClassical,
      url: "https://ruleset.skk.moe/Clash/non_ip/reject-no-drop.txt",
      path: ./ruleset/reject_non_ip_no_drop.txt,
    }
  reject_ip:
    {
      <<: *RulesetClassical,
      url: "https://ruleset.skk.moe/Clash/ip/reject.txt",
      path: ./ruleset/reject_ip.txt,
    }

  OpenAi:
    {
      <<: *RulesetYaml,
      url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/OpenAI/OpenAI.yaml",
      path: ./ruleset/OpenAi.yaml,
    }
  Claude:
    {
      <<: *RulesetYaml,
      url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Claude/Claude.yaml",
      path: ./ruleset/Claude.yaml,
    }
  Gemini:
    {
      <<: *RulesetYaml,
      url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Gemini/Gemini.yaml",
      path: ./ruleset/Gemini.yaml,
    }
  Copilot:
    {
      <<: *RulesetYaml,
      url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Copilot/Copilot.yaml",
      path: ./ruleset/Copilot.yaml,
    }
  Anthropic:
    {
      <<: *RulesetYaml,
      url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Anthropic/Anthropic.yaml",
      path: ./ruleset/Anthropic.yaml,
    }
  ai_non_ip:
    {
      <<: *RulesetClassical,
      url: "https://ruleset.skk.moe/Clash/non_ip/ai.txt",
      path: ./ruleset/ai_non_ip.txt,
    }

  telegram_ip:
    {
      <<: *RulesetClassical,
      url: "https://ruleset.skk.moe/Clash/ip/telegram.txt",
      path: ./ruleset/telegram_ip.txt,
    }
  telegram_non_ip:
    {
      <<: *RulesetClassical,
      url: "https://ruleset.skk.moe/Clash/non_ip/telegram.txt",
      path: ./ruleset/telegram_non_ip.txt,
    }
  Twitter:
    {
      <<: *RulesetYaml,
      url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Twitter/Twitter.yaml",
      path: ./ruleset/Twitter.yaml,
    }

  Netflix:
    {
      <<: *RulesetYaml,
      url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Netflix/Netflix.yaml",
      path: ./ruleset/Netflix.yaml,
    }
  YouTube:
    {
      <<: *RulesetYaml,
      url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/YouTube/YouTube.yaml",
      path: ./ruleset/YouTube.yaml,
    }
  YouTubeMusic:
    {
      <<: *RulesetYaml,
      url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/YouTubeMusic/YouTubeMusic.yaml",
      path: ./ruleset/YouTubeMusic.yaml,
    }
  Bahamut:
    {
      <<: *RulesetYaml,
      url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Bahamut/Bahamut.yaml",
      path: ./ruleset/Bahamut.yaml,
    }
  stream_non_ip:
    {
      <<: *RulesetClassical,
      url: "https://ruleset.skk.moe/Clash/non_ip/stream.txt",
      path: ./ruleset/stream_non_ip.txt,
    }
  stream_ip:
    {
      <<: *RulesetClassical,
      url: "https://ruleset.skk.moe/Clash/ip/stream.txt",
      path: ./ruleset/stream_ip.txt,
    }

  Google:
    {
      <<: *RulesetYaml,
      url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Google/Google.yaml",
      path: ./ruleset/Google.yaml,
    }
  Github:
    {
      <<: *RulesetYaml,
      url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/GitHub/GitHub.yaml",
      path: ./ruleset/Github.yaml,
    }
  PayPal:
    {
      <<: *RulesetYaml,
      url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/PayPal/PayPal.yaml",
      path: ./ruleset/PayPal.yaml,
    }
  Game:
    {
      <<: *RulesetYaml,
      url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Game/Game.yaml",
      path: ./ruleset/Game.yaml,
    }

  microsoft_non_ip:
    {
      <<: *RulesetClassical,
      url: "https://ruleset.skk.moe/Clash/non_ip/microsoft.txt",
      path: ./ruleset/microsoft.txt,
    }
  microsoft_cdn_non_ip:
    {
      <<: *RulesetClassical,
      url: "https://ruleset.skk.moe/Clash/non_ip/microsoft_cdn.txt",
      path: ./ruleset/microsoft_cdn_non_ip.txt,
    }
  apple_services:
    {
      <<: *RulesetClassical,
      url: "https://ruleset.skk.moe/Clash/non_ip/apple_services.txt",
      path: ./ruleset/apple_services.txt,
    }
  apple_cdn:
    {
      type: http,
      behavior: domain,
      format: text,
      interval: 86400,
      url: "https://ruleset.skk.moe/Clash/domainset/apple_cdn.txt",
      path: ./ruleset/apple_cdn.txt,
    }
  apple_cn_non_ip:
    {
      <<: *RulesetClassical,
      url: "https://ruleset.skk.moe/Clash/non_ip/apple_cn.txt",
      path: ./ruleset/apple_cn_non_ip.txt,
    }

  cdn_domainset:
    {
      type: http,
      behavior: domain,
      format: text,
      interval: 86400,
      url: "https://ruleset.skk.moe/Clash/domainset/cdn.txt",
      path: ./ruleset/cdn_domainset.txt,
    }
  cdn_non_ip:
    {
      type: http,
      behavior: domain,
      format: text,
      interval: 86400,
      url: "https://ruleset.skk.moe/Clash/non_ip/cdn.txt",
      path: ./ruleset/cdn_non_ip.txt,
    }
  download_domainset:
    {
      type: http,
      behavior: domain,
      format: text,
      interval: 86400,
      url: "https://ruleset.skk.moe/Clash/domainset/download.txt",
      path: ./ruleset/download_domainset.txt,
    }
  download_non_ip:
    {
      type: http,
      behavior: domain,
      format: text,
      interval: 86400,
      url: "https://ruleset.skk.moe/Clash/non_ip/download.txt",
      path: ./ruleset/download_non_ip.txt,
    }

  lan_non_ip:
    {
      <<: *RulesetClassical,
      url: "https://ruleset.skk.moe/Clash/non_ip/lan.txt",
      path: ./ruleset/lan_non_ip.txt,
    }
  lan_ip:
    {
      <<: *RulesetClassical,
      url: "https://ruleset.skk.moe/Clash/ip/lan.txt",
      path: ./ruleset/lan_ip.txt,
    }
  domestic_ip:
    {
      <<: *RulesetClassical,
      url: "https://ruleset.skk.moe/Clash/ip/domestic.txt",
      path: ./ruleset/domestic_ip.txt,
    }
  domestic_non_ip:
    {
      <<: *RulesetClassical,
      url: "https://ruleset.skk.moe/Clash/non_ip/domestic.txt",
      path: ./ruleset/domestic_non_ip.txt,
    }
  direct_non_ip:
    {
      <<: *RulesetClassical,
      url: "https://ruleset.skk.moe/Clash/non_ip/direct.txt",
      path: ./ruleset/direct_non_ip.txt,
    }
  china_ip:
    {
      type: http,
      behavior: ipcidr,
      format: text,
      interval: 86400,
      url: "https://ruleset.skk.moe/Clash/ip/china_ip.txt",
      path: ./ruleset/china_ip.txt,
    }
  global_non_ip:
    {
      <<: *RulesetClassical,
      url: "https://ruleset.skk.moe/Clash/non_ip/global.txt",
      path: ./ruleset/global_non_ip.txt,
    }

# **=============================== åˆ†æµè§„åˆ™ ===============================**
# [PERF] è§„åˆ™é‡æ’åŸåˆ™:
#   - é«˜é¢‘å‘½ä¸­çš„è§„åˆ™é å‰ï¼ˆLANã€ç›´è¿ã€Tailscaleï¼‰
#   - IP è§„åˆ™å°½é‡å¸¦ no-resolve é¿å…è§¦å‘é¢å¤– DNS æŸ¥è¯¢
#   - åŒç±»è§„åˆ™èšåˆï¼Œå‡å°‘è§„åˆ™å¼•æ“è·³è½¬å¼€é”€
rules:
  # ==================== 0. è¿›ç¨‹ç›´è¿ (æœ€é«˜ä¼˜å…ˆçº§ï¼Œé›¶å¼€é”€çŸ­è·¯) ====================
  - PROCESS-NAME,tailscale.exe,DIRECT
  - PROCESS-NAME,tailscaled.exe,DIRECT
  - PROCESS-NAME,tailscaled,DIRECT

  # ==================== 1. ç½‘ç»œåŸºç¡€è®¾æ–½ç›´è¿ (é«˜é¢‘å‘½ä¸­) ====================
  - IP-CIDR,100.64.0.0/10,DIRECT,no-resolve
  - IP-CIDR,192.168.31.0/24,DIRECT,no-resolve
  - DOMAIN-SUFFIX,ts.net,DIRECT
  - DOMAIN-KEYWORD,tailscale,DIRECT
  - RULE-SET,lan_non_ip,DIRECT
  - RULE-SET,lan_ip,DIRECT

  # ==================== 2. DNS æœåŠ¡å™¨èµ°ä»£ç† (é˜²è¶…æ—¶) ====================
  - IP-CIDR,8.8.8.8/32,ğŸ¯ èŠ‚ç‚¹é€‰æ‹©,no-resolve
  - IP-CIDR,8.8.4.4/32,ğŸ¯ èŠ‚ç‚¹é€‰æ‹©,no-resolve
  - IP-CIDR,1.1.1.1/32,ğŸ¯ èŠ‚ç‚¹é€‰æ‹©,no-resolve
  - IP-CIDR,1.0.0.1/32,ğŸ¯ èŠ‚ç‚¹é€‰æ‹©,no-resolve

  # ==================== 3. ç”¨æˆ·è‡ªå®šä¹‰ç›´è¿ ====================
  - DOMAIN-SUFFIX,guoker.org,DIRECT
  - DOMAIN-SUFFIX,gying.net,DIRECT
  - DOMAIN-SUFFIX,selectgroup.click,DIRECT
  - DOMAIN-SUFFIX,smardaten.com,DIRECT
  - DOMAIN-SUFFIX,openrouter.ai,DIRECT
  - DOMAIN-SUFFIX,right.codes,DIRECT
  - DOMAIN-SUFFIX,juejin.cn,DIRECT

  # ==================== 4. ç”¨æˆ·è‡ªå®šä¹‰ä»£ç† ====================
  - DOMAIN-SUFFIX,coze.com,ğŸŒ å…¨çƒåŠ é€Ÿ
  - DOMAIN-SUFFIX,ouonetwork.com,ğŸŒ å…¨çƒåŠ é€Ÿ
  - DOMAIN-SUFFIX,linux.do,ğŸŒ å…¨çƒåŠ é€Ÿ
  - DOMAIN-SUFFIX,marketplace.jetbrains.com,ğŸŒ å…¨çƒåŠ é€Ÿ

  # ==================== 5. å¹¿å‘Šæ‹¦æˆª ====================
  - RULE-SET,reject_non_ip,REJECT
  - RULE-SET,reject_domainset,REJECT
  - RULE-SET,reject_non_ip_drop,REJECT-DROP
  - RULE-SET,reject_non_ip_no_drop,REJECT
  - RULE-SET,reject_ip,REJECT

  # ==================== 6. AI æœåŠ¡ ====================
  - DOMAIN-KEYWORD,antigravity,ğŸ” è°·æ­ŒæœåŠ¡
  - DOMAIN-SUFFIX,grok.com,ğŸ¤– äººå·¥æ™ºèƒ½
  - DOMAIN-SUFFIX,cici.com,ğŸ¤– äººå·¥æ™ºèƒ½
  - DOMAIN-SUFFIX,trae.ai,ğŸ¤– äººå·¥æ™ºèƒ½
  - DOMAIN-SUFFIX,perplexity.ai,ğŸ¤– äººå·¥æ™ºèƒ½
  - DOMAIN-SUFFIX,poe.com,ğŸ¤– äººå·¥æ™ºèƒ½
  - DOMAIN-SUFFIX,cursor.sh,ğŸ¤– äººå·¥æ™ºèƒ½
  - DOMAIN-SUFFIX,cursor.com,ğŸ¤– äººå·¥æ™ºèƒ½
  - DOMAIN-SUFFIX,suno.ai,ğŸ¤– äººå·¥æ™ºèƒ½
  - DOMAIN-SUFFIX,midjourney.com,ğŸ¤– äººå·¥æ™ºèƒ½
  - DOMAIN-SUFFIX,windsurf.com,ğŸ¤– äººå·¥æ™ºèƒ½
  - DOMAIN-SUFFIX,codeium.com,ğŸ¤– äººå·¥æ™ºèƒ½
  - DOMAIN-SUFFIX,v0.dev,ğŸ¤– äººå·¥æ™ºèƒ½
  - DOMAIN-SUFFIX,bolt.new,ğŸ¤– äººå·¥æ™ºèƒ½
  - DOMAIN-SUFFIX,lovable.dev,ğŸ¤– äººå·¥æ™ºèƒ½
  - DOMAIN-SUFFIX,notebooklm.google.com,ğŸ” è°·æ­ŒæœåŠ¡
  - RULE-SET,OpenAi,ğŸ¤– äººå·¥æ™ºèƒ½
  - RULE-SET,Copilot,ğŸ¤– äººå·¥æ™ºèƒ½
  - RULE-SET,Anthropic,ğŸ¤– äººå·¥æ™ºèƒ½
  - RULE-SET,Claude,ğŸ¤– äººå·¥æ™ºèƒ½
  - RULE-SET,Gemini,ğŸ” è°·æ­ŒæœåŠ¡
  - RULE-SET,ai_non_ip,ğŸ¤– äººå·¥æ™ºèƒ½

  # ==================== 7. ç¤¾äº¤åº”ç”¨ ====================
  - RULE-SET,telegram_non_ip,âœˆï¸ ç”µæŠ¥æ¶ˆæ¯
  - RULE-SET,telegram_ip,âœˆï¸ ç”µæŠ¥æ¶ˆæ¯
  - RULE-SET,Twitter,ğŸŒ å…¨çƒåŠ é€Ÿ
  - RULE-SET,Github,ğŸŒ å…¨çƒåŠ é€Ÿ

  # ==================== 8. æµåª’ä½“æœåŠ¡ ====================
  - RULE-SET,Bahamut,ğŸ¬ å›½é™…åª’ä½“
  - RULE-SET,Netflix,ğŸ¬ å›½é™…åª’ä½“
  - RULE-SET,stream_non_ip,ğŸ¬ å›½é™…åª’ä½“
  - RULE-SET,stream_ip,ğŸ¬ å›½é™…åª’ä½“
  - RULE-SET,YouTube,ğŸ¬ å›½é™…åª’ä½“
  - RULE-SET,YouTubeMusic,ğŸ¬ å›½é™…åª’ä½“

  # ==================== 9. æ¸¸æˆä¸æ”¯ä»˜ ====================
  - RULE-SET,Game,ğŸ® æ¸¸æˆå¹³å°
  - RULE-SET,PayPal,ğŸ’³ PayPal

  # ==================== 10. å¾®è½¯ä¸è‹¹æœ ====================
  - RULE-SET,apple_cdn,DIRECT
  - RULE-SET,apple_cn_non_ip,DIRECT
  - RULE-SET,apple_services,ğŸ è‹¹æœæœåŠ¡
  - RULE-SET,microsoft_cdn_non_ip,DIRECT
  - RULE-SET,microsoft_non_ip,â“‚ï¸ å¾®è½¯æœåŠ¡

  # ==================== 11. è°·æ­ŒæœåŠ¡ ====================
  - RULE-SET,Google,ğŸ” è°·æ­ŒæœåŠ¡

  # ==================== 12. ä¸‹è½½ä¸CDN ====================
  - RULE-SET,cdn_domainset,ğŸ¯ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,cdn_non_ip,ğŸ¯ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,download_domainset,DIRECT
  - RULE-SET,download_non_ip,DIRECT

  # ==================== 13. å›½å†…æµé‡ ====================
  - RULE-SET,global_non_ip,ğŸŒ å…¨çƒåŠ é€Ÿ
  - RULE-SET,domestic_non_ip,DIRECT
  - RULE-SET,direct_non_ip,DIRECT
  - RULE-SET,domestic_ip,DIRECT
  - RULE-SET,china_ip,DIRECT

  # ==================== 14. å…œåº•è§„åˆ™ ====================
  - GEOIP,private,DIRECT,no-resolve
  - GEOIP,CN,ğŸ  å›½å†…æµé‡,no-resolve
  - MATCH,ğŸŸ å…œåº•åˆ†æµ
