# ==========================================
# Mihomo/Clash Meta Smart ç»ˆæä¼˜åŒ–é…ç½®
# æ•´åˆå†…å®¹ï¼šSmart æ™ºèƒ½åˆ†æµ + å…¨é‡è§„åˆ™é›† + ç¤¾äº¤/é‡‘èç²¾ç»†åŒ–
# Date: 2026-01-28
# ==========================================

# **=============================== å…¨å±€è®¾ç½® ===============================**
port: 7893
socks-port: 7891
redir-port: 7892
mixed-port: 7890
tproxy-port: 7894
allow-lan: true
mode: rule
bind-address: "*"
ipv6: true
unified-delay: true
tcp-concurrent: true
log-level: warning
find-process-mode: strict
global-client-fingerprint: chrome
keep-alive-idle: 600
keep-alive-interval: 15
disable-keep-alive: false

profile:
  store-selected: true
  store-fake-ip: true
  smart-collector-size: 100

# **=============================== æµé‡å—…æ¢é…ç½® ===============================**
sniffer:
  enable: true
  sniff:
    HTTP:
      ports: [80, 8080-8880]
      override-destination: true
    TLS:
      ports: [443, 8443]
    QUIC:
      ports: [443, 8443]
  force-domain:
    - "+.v2ex.com"
  skip-domain:
    - "Mijia Cloud"
    - "+.push.apple.com"
    - "+.baidu.com"
    - "+.bilibili.com"

# **=============================== TUN é…ç½® ===============================**
tun:
  enable: true
  stack: mixed
  device: Mihomo
  auto-route: true
  auto-redirect: true
  auto-detect-interface: true
  strict-route: true
  dns-hijack:
    - any:53
    - tcp://any:53
  mtu: 1500
  gso: true
  gso-max-size: 65536
  udp-timeout: 300

# **=============================== DNS é…ç½® ===============================**
dns:
  enable: true
  ipv6: true
  prefer-h3: true
  respect-rules: true
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  use-hosts: true

  fake-ip-filter:
    - "+.m2m"
    - "injections.adguard.org"
    - "local.adguard.org"
    - "+.bogon"
    - "+.lan"
    - "+.local"
    - "+.internal"
    - "+.localdomain"
    - "home.arpa"
    - "127.0.0.1.sslip.io"
    - "127.atlas.skk.moe"
    - "dns.msftncsi.com"
    - "*.srv.nintendo.net"
    - "*.stun.playstation.net"
    - "xbox.*.microsoft.com"
    - "*.xboxlive.com"
    - "*.turn.twilio.com"
    - "*.stun.twilio.com"
    - "stun.syncthing.net"
    - "stun.*"
    - "127.*.*.*.sslip.io"
    - "127-*-*-*.sslip.io"
    - "*.127.*.*.*.sslip.io"
    - "*-127-*-*-*.sslip.io"
    - "127.*.*.*.nip.io"
    - "127-*-*-*.nip.io"
    - "*.127.*.*.*.nip.io"
    - "*-127-*-*-*.nip.io"
    - "192.168.31.0/24"
    - "10.0.0.0/8"
    - "172.16.0.0/12"
    - "100.64.0.0/10"
    - "*.ts.net"
    - "tailscale.com"

  default-nameserver:
    - 223.5.5.5
    - 119.29.29.29

  nameserver:
    - https://doh.pub/dns-query
    - https://dns.alidns.com/dns-query

  proxy-server-nameserver:
    - https://doh.pub/dns-query

  direct-nameserver:
    - https://doh.pub/dns-query

  nameserver-policy:
    "geosite:cn,private":
      - https://doh.pub/dns-query
      - https://dns.alidns.com/dns-query

  fallback:
    - https://1.1.1.1/dns-query
    - https://dns.google/dns-query

  fallback-filter:
    geoip: false
    ipcidr:
      - 192.168.31.0/24
      - 10.0.0.0/8
      - 172.16.0.0/12
      - 127.0.0.1/8
      - 100.65.0.0/10
      - 240.0.0.0/4
      - 0.0.0.0/32
      - 61.160.148.90/32
      - "3131:3131:3131:3131:3131:3131:3131:3131/128"
    domain:
      - "*.ts.net"
      - "tailscale.com"

# **=============================== GEO æ•°æ®åº“é…ç½® ===============================**
geodata-mode: true
geodata-loader: memconservative
geo-auto-update: true
geo-update-interval: 48
geox-url:
  geoip: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geoip.dat"
  geosite: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geosite.dat"
  mmdb: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geoip.metadb"

# **=============================== æ§åˆ¶é¢æ¿ ===============================**
external-controller: 127.0.0.1:9090
secret: "123465."
external-ui: "./ui"
external-ui-url: "https://github.com/Zephyruso/zashboard/releases/latest/download/dist.zip"

# **=============================== Smart å†…æ ¸é…ç½® ===============================**
lgbm-auto-update: false
lgbm-update-interval: 72
lgbm-url: "https://github.com/vernesong/mihomo/releases/download/LightGBM-Model/Model-large.bin"

# **=============================== ç­–ç•¥ç»„é…ç½® ===============================**
# ç­–ç•¥ç»„åŸºç¡€é…ç½®æ¨¡æ¿
UrlTest: &UrlTest
  type: url-test
  url: https://www.gstatic.com/generate_204
  interval: 300
  tolerance: 50
  lazy: true
  timeout: 2000
  max-failed-times: 3
  include-all: true

FallBack: &FallBack
  type: fallback
  url: https://www.gstatic.com/generate_204
  interval: 300
  lazy: true
  timeout: 2000
  max-failed-times: 3
  include-all: true

LoadBalance: &LoadBalance
  type: load-balance
  url: https://www.gstatic.com/generate_204
  interval: 300
  lazy: true
  strategy: consistent-hashing
  timeout: 2000
  max-failed-times: 3
  include-all: true

# Smart ç­–ç•¥ç»„æ¨¡æ¿
SmartAuto: &SmartAuto
  type: smart
  url: https://www.gstatic.com/generate_204
  interval: 300
  lazy: true
  timeout: 2000
  max-failed-times: 3
  include-all: true
  uselightgbm: true
  collectdata: true
  strategy: sticky-sessions
  sample-rate: 1

SmartBalance: &SmartBalance
  type: smart
  url: https://www.gstatic.com/generate_204
  interval: 300
  lazy: true
  timeout: 2000
  max-failed-times: 3
  include-all: true
  uselightgbm: true
  collectdata: true
  strategy: round-robin
  sample-rate: 1

proxy-groups:
  # ========== ä¸»è¦ç­–ç•¥ç»„ ==========
  - name: ğŸ¯ èŠ‚ç‚¹é€‰æ‹©
    type: select
    proxies:
      - æ™ºèƒ½é€‰æ‹©
      - æ‰‹åŠ¨é€‰æ‹©
      - DIRECT
    icon: https://raw.githubusercontent.com/Orz-3/mini/master/Color/Static.png

  - name: æ‰‹åŠ¨é€‰æ‹©
    type: select
    proxies:
      - ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
      - ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹
      - ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹
      - ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹
      - ğŸ‡¹ğŸ‡¼ å°æ¹¾èŠ‚ç‚¹
      - ğŸŒ å…¶ä»–èŠ‚ç‚¹
    icon: https://raw.githubusercontent.com/Orz-3/mini/master/Color/Cylink.png

  - name: æ™ºèƒ½é€‰æ‹©
    type: select
    proxies:
      - ğŸ‡­ğŸ‡° é¦™æ¸¯ - Auto
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬ - Auto
      - ğŸ‡°ğŸ‡· éŸ©å›½ - Auto
      - ğŸ‡¸ğŸ‡¬ ç‹®åŸ - Auto
      - ğŸ‡ºğŸ‡¸ ç¾å›½ - Auto
      - ğŸ‡¹ğŸ‡¼ å°æ¹¾ - Auto
      - ğŸŒ å…¶ä»– - Auto
    icon: https://raw.githubusercontent.com/Orz-3/mini/master/Color/Urltest.png

  # ========== åº”ç”¨åˆ†æµç­–ç•¥ç»„ ==========
  - name: ğŸ¤– äººå·¥æ™ºèƒ½
    type: select
    proxies:
      - ğŸ‡ºğŸ‡¸ ç¾å›½ - Auto
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬ - Auto
      - ğŸ‡¸ğŸ‡¬ ç‹®åŸ - Auto
      - ğŸ‡¹ğŸ‡¼ å°æ¹¾ - Auto
      - ğŸ¯ èŠ‚ç‚¹é€‰æ‹©
    icon: https://raw.githubusercontent.com/Orz-3/mini/master/Color/OpenAI.png

  - name: âœˆï¸ ç”µæŠ¥æ¶ˆæ¯
    type: select
    proxies:
      - ğŸ¯ èŠ‚ç‚¹é€‰æ‹©
      - ğŸ‡­ğŸ‡° é¦™æ¸¯ - Auto
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬ - Auto
      - ğŸ‡¸ğŸ‡¬ ç‹®åŸ - Auto
      - ğŸ‡ºğŸ‡¸ ç¾å›½ - Auto
    icon: https://raw.githubusercontent.com/Orz-3/mini/master/Color/Telegram.png

  - name: ğŸ¦ æ¨ç‰¹æœåŠ¡
    type: select
    proxies:
      - ğŸ¯ èŠ‚ç‚¹é€‰æ‹©
      - ğŸ‡­ğŸ‡° é¦™æ¸¯ - Auto
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬ - Auto
      - ğŸ‡ºğŸ‡¸ ç¾å›½ - Auto
      - DIRECT
    icon: https://raw.githubusercontent.com/Orz-3/mini/master/Color/Twitter.png

  - name: ğŸŒ å…¨çƒåŠ é€Ÿ
    type: select
    proxies:
      - ğŸ¯ èŠ‚ç‚¹é€‰æ‹©
      - DIRECT
      - æ™ºèƒ½é€‰æ‹©
      - æ‰‹åŠ¨é€‰æ‹©
    icon: https://raw.githubusercontent.com/Orz-3/mini/master/Color/Global.png

  - name: ğŸ¬ å›½é™…åª’ä½“
    type: select
    proxies:
      - ğŸ¯ èŠ‚ç‚¹é€‰æ‹©
      - ğŸ‡­ğŸ‡° é¦™æ¸¯ - Auto
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬ - Auto
      - ğŸ‡ºğŸ‡¸ ç¾å›½ - Auto
      - ğŸ‡¸ğŸ‡¬ ç‹®åŸ - Auto
      - DIRECT
    icon: https://raw.githubusercontent.com/Orz-3/mini/master/Color/Streaming.png

  - name: ğŸ“º å“”å“©å“”å“©
    type: select
    proxies:
      - DIRECT
      - ğŸ‡­ğŸ‡° é¦™æ¸¯ - Auto
      - ğŸ‡¹ğŸ‡¼ å°æ¹¾ - Auto
    icon: https://raw.githubusercontent.com/Orz-3/mini/master/Color/bilibili.png

  - name: ğŸ è‹¹æœæœåŠ¡
    type: select
    proxies:
      - DIRECT
      - ğŸ¯ èŠ‚ç‚¹é€‰æ‹©
      - ğŸ‡­ğŸ‡° é¦™æ¸¯ - Auto
      - ğŸ‡ºğŸ‡¸ ç¾å›½ - Auto
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Apple.png

  - name: â“‚ï¸ å¾®è½¯æœåŠ¡
    type: select
    proxies:
      - DIRECT
      - ğŸ¯ èŠ‚ç‚¹é€‰æ‹©
      - ğŸ‡­ğŸ‡° é¦™æ¸¯ - Auto
      - ğŸ‡ºğŸ‡¸ ç¾å›½ - Auto
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Microsoft.png

  - name: ğŸ” è°·æ­ŒæœåŠ¡
    type: select
    proxies:
      - ğŸ¯ èŠ‚ç‚¹é€‰æ‹©
      - ğŸ‡­ğŸ‡° é¦™æ¸¯ - Auto
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬ - Auto
      - ğŸ‡ºğŸ‡¸ ç¾å›½ - Auto
      - DIRECT
    icon: https://raw.githubusercontent.com/Orz-3/mini/master/Color/Google.png

  - name: ğŸ’³ PayPal
    type: select
    proxies:
      - ğŸ¯ èŠ‚ç‚¹é€‰æ‹©
      - ğŸ‡­ğŸ‡° é¦™æ¸¯ - Auto
      - ğŸ‡ºğŸ‡¸ ç¾å›½ - Auto
      - DIRECT
    icon: https://raw.githubusercontent.com/Orz-3/mini/master/Color/Paypal.png

  - name: ğŸ® æ¸¸æˆå¹³å°
    type: select
    proxies:
      - DIRECT
      - ğŸ¯ èŠ‚ç‚¹é€‰æ‹©
      - ğŸ‡­ğŸ‡° é¦™æ¸¯ - Auto
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬ - Auto
      - ğŸ‡ºğŸ‡¸ ç¾å›½ - Auto
    icon: https://raw.githubusercontent.com/Orz-3/mini/master/Color/GAME.png

  - name: ğŸ¯ å…œåº•åˆ†æµ
    type: select
    proxies:
      - ğŸ¯ èŠ‚ç‚¹é€‰æ‹©
      - DIRECT
      - æ™ºèƒ½é€‰æ‹©
    icon: https://raw.githubusercontent.com/Orz-3/mini/master/Color/Final.png

  # ========== åœ°åŒºèŠ‚ç‚¹ - Auto æ¨¡å¼é€‰æ‹© ==========
  - name: ğŸ‡­ğŸ‡° é¦™æ¸¯ - Auto
    type: select
    proxies:
      - ğŸ‡­ğŸ‡° é¦™æ¸¯ - è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡­ğŸ‡° é¦™æ¸¯ - è´Ÿè½½å‡è¡¡
      - ğŸ‡­ğŸ‡° é¦™æ¸¯ - è‡ªåŠ¨å›é€€

  - name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬ - Auto
    type: select
    proxies:
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬ - è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬ - è´Ÿè½½å‡è¡¡
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬ - è‡ªåŠ¨å›é€€

  - name: ğŸ‡°ğŸ‡· éŸ©å›½ - Auto
    type: select
    proxies:
      - ğŸ‡°ğŸ‡· éŸ©å›½ - è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡°ğŸ‡· éŸ©å›½ - è´Ÿè½½å‡è¡¡
      - ğŸ‡°ğŸ‡· éŸ©å›½ - è‡ªåŠ¨å›é€€

  - name: ğŸ‡¸ğŸ‡¬ ç‹®åŸ - Auto
    type: select
    proxies:
      - ğŸ‡¸ğŸ‡¬ ç‹®åŸ - è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡¸ğŸ‡¬ ç‹®åŸ - è´Ÿè½½å‡è¡¡
      - ğŸ‡¸ğŸ‡¬ ç‹®åŸ - è‡ªåŠ¨å›é€€

  - name: ğŸ‡ºğŸ‡¸ ç¾å›½ - Auto
    type: select
    proxies:
      - ğŸ‡ºğŸ‡¸ ç¾å›½ - è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡ºğŸ‡¸ ç¾å›½ - è´Ÿè½½å‡è¡¡
      - ğŸ‡ºğŸ‡¸ ç¾å›½ - è‡ªåŠ¨å›é€€

  - name: ğŸ‡¹ğŸ‡¼ å°æ¹¾ - Auto
    type: select
    proxies:
      - ğŸ‡¹ğŸ‡¼ å°æ¹¾ - è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡¹ğŸ‡¼ å°æ¹¾ - è´Ÿè½½å‡è¡¡
      - ğŸ‡¹ğŸ‡¼ å°æ¹¾ - è‡ªåŠ¨å›é€€

  - name: ğŸŒ å…¶ä»– - Auto
    type: select
    proxies:
      - ğŸŒ å…¶ä»– - è‡ªåŠ¨é€‰æ‹©
      - ğŸŒ å…¶ä»– - è´Ÿè½½å‡è¡¡
      - ğŸŒ å…¶ä»– - è‡ªåŠ¨å›é€€

  # ========== Smart è‡ªåŠ¨é€‰æ‹©ç­–ç•¥ç»„ ==========
  - name: ğŸ‡­ğŸ‡° é¦™æ¸¯ - è‡ªåŠ¨é€‰æ‹©
    <<: *SmartAuto
    filter: "æ¸¯|HK|(?i)Hong"
    policy-priority: "Premium:1.2;IPLC:1.3"

  - name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬ - è‡ªåŠ¨é€‰æ‹©
    <<: *SmartAuto
    filter: "æ—¥|ä¸œäº¬|JP|(?i)Japan"
    policy-priority: "Premium:1.2;IPLC:1.3"

  - name: ğŸ‡°ğŸ‡· éŸ©å›½ - è‡ªåŠ¨é€‰æ‹©
    <<: *SmartAuto
    filter: "éŸ©å›½|éŸ©|KR|ğŸ‡°ğŸ‡·|(?i)Korea"
    policy-priority: "Premium:1.2"

  - name: ğŸ‡¸ğŸ‡¬ ç‹®åŸ - è‡ªåŠ¨é€‰æ‹©
    <<: *SmartAuto
    filter: "æ–°|å¡|SG|(?i)Singapore"
    policy-priority: "Premium:1.2;IPLC:1.3"

  - name: ğŸ‡ºğŸ‡¸ ç¾å›½ - è‡ªåŠ¨é€‰æ‹©
    <<: *SmartAuto
    filter: "ç¾|US|(?i)States|American"
    policy-priority: "Premium:1.2"

  - name: ğŸ‡¹ğŸ‡¼ å°æ¹¾ - è‡ªåŠ¨é€‰æ‹©
    <<: *SmartAuto
    filter: "å°|æ¹¾|TW|(?i)Taiwan"
    policy-priority: "Premium:1.2"

  - name: ğŸŒ å…¶ä»– - è‡ªåŠ¨é€‰æ‹©
    <<: *SmartAuto
    filter: "^(?!.*(ğŸ‡­ğŸ‡°|HK|Hong|é¦™æ¸¯|ğŸ‡¹ğŸ‡¼|TW|Taiwan|Wan|å°|æ¹¾|ğŸ‡¯ğŸ‡µ|JP|Japan|æ—¥æœ¬|ğŸ‡¸ğŸ‡¬|SG|Singapore|ç‹®åŸ|ğŸ‡ºğŸ‡¸|US|United States|America|ç¾å›½|ğŸ‡°ğŸ‡·|KR|Korea|éŸ©å›½|éŸ“)).*$"
    policy-priority: "Premium:1.1"

  # ========== Smart è´Ÿè½½å‡è¡¡ç­–ç•¥ç»„ ==========
  - name: ğŸ‡­ğŸ‡° é¦™æ¸¯ - è´Ÿè½½å‡è¡¡
    <<: *SmartBalance
    filter: "æ¸¯|HK|(?i)Hong"
    policy-priority: "Premium:1.2;IPLC:1.3"

  - name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬ - è´Ÿè½½å‡è¡¡
    <<: *SmartBalance
    filter: "æ—¥|ä¸œäº¬|JP|(?i)Japan"
    policy-priority: "Premium:1.2;IPLC:1.3"

  - name: ğŸ‡°ğŸ‡· éŸ©å›½ - è´Ÿè½½å‡è¡¡
    <<: *SmartBalance
    filter: "éŸ©å›½|éŸ©|KR|ğŸ‡°ğŸ‡·|(?i)Korea"
    policy-priority: "Premium:1.2"

  - name: ğŸ‡¸ğŸ‡¬ ç‹®åŸ - è´Ÿè½½å‡è¡¡
    <<: *SmartBalance
    filter: "æ–°|å¡|SG|(?i)Singapore"
    policy-priority: "Premium:1.2;IPLC:1.3"

  - name: ğŸ‡ºğŸ‡¸ ç¾å›½ - è´Ÿè½½å‡è¡¡
    <<: *SmartBalance
    filter: "ç¾|US|(?i)States|American"
    policy-priority: "Premium:1.2"

  - name: ğŸ‡¹ğŸ‡¼ å°æ¹¾ - è´Ÿè½½å‡è¡¡
    <<: *SmartBalance
    filter: "å°|æ¹¾|TW|(?i)Taiwan"
    policy-priority: "Premium:1.2"

  - name: ğŸŒ å…¶ä»– - è´Ÿè½½å‡è¡¡
    <<: *SmartBalance
    filter: "^(?!.*(ğŸ‡­ğŸ‡°|HK|Hong|é¦™æ¸¯|ğŸ‡¹ğŸ‡¼|TW|Taiwan|Wan|å°|æ¹¾|ğŸ‡¯ğŸ‡µ|JP|Japan|æ—¥æœ¬|ğŸ‡¸ğŸ‡¬|SG|Singapore|ç‹®åŸ|ğŸ‡ºğŸ‡¸|US|United States|America|ç¾å›½|ğŸ‡°ğŸ‡·|KR|Korea|éŸ©å›½|éŸ“)).*$"
    policy-priority: "Premium:1.1"

  # ========== ä¼ ç»Ÿè‡ªåŠ¨å›é€€ç­–ç•¥ç»„ï¼ˆä¿é™©æœºåˆ¶ï¼‰==========
  - name: ğŸ‡­ğŸ‡° é¦™æ¸¯ - è‡ªåŠ¨å›é€€
    <<: *FallBack
    filter: "æ¸¯|HK|(?i)Hong"

  - name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬ - è‡ªåŠ¨å›é€€
    <<: *FallBack
    filter: "æ—¥|ä¸œäº¬|JP|(?i)Japan"

  - name: ğŸ‡°ğŸ‡· éŸ©å›½ - è‡ªåŠ¨å›é€€
    <<: *FallBack
    filter: "éŸ©å›½|éŸ©|KR|ğŸ‡°ğŸ‡·|(?i)Korea"

  - name: ğŸ‡¸ğŸ‡¬ ç‹®åŸ - è‡ªåŠ¨å›é€€
    <<: *FallBack
    filter: "æ–°|å¡|SG|(?i)Singapore"

  - name: ğŸ‡ºğŸ‡¸ ç¾å›½ - è‡ªåŠ¨å›é€€
    <<: *FallBack
    filter: "ç¾|US|(?i)States|American"

  - name: ğŸ‡¹ğŸ‡¼ å°æ¹¾ - è‡ªåŠ¨å›é€€
    <<: *FallBack
    filter: "å°|æ¹¾|TW|(?i)Taiwan"

  - name: ğŸŒ å…¶ä»– - è‡ªåŠ¨å›é€€
    <<: *FallBack
    filter: "^(?!.*(ğŸ‡­ğŸ‡°|HK|Hong|é¦™æ¸¯|ğŸ‡¹ğŸ‡¼|TW|å°|æ¹¾|Taiwan|Wan|ğŸ‡¯ğŸ‡µ|JP|Japan|æ—¥æœ¬|ğŸ‡¸ğŸ‡¬|SG|Singapore|ç‹®åŸ|ğŸ‡ºğŸ‡¸|US|United States|America|ç¾å›½|ğŸ‡°ğŸ‡·|KR|Korea|éŸ©å›½|éŸ“)).*$"

  # ========== åœ°åŒºèŠ‚ç‚¹ - æ‰‹åŠ¨é€‰æ‹© ==========
  - name: ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
    type: select
    filter: "æ¸¯|HK|(?i)Hong"
    include-all: true
    icon: https://raw.githubusercontent.com/Orz-3/mini/master/Color/HK.png

  - name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
    type: select
    filter: "æ—¥|ä¸œäº¬|JP|(?i)Japan"
    include-all: true
    icon: https://raw.githubusercontent.com/Orz-3/mini/master/Color/JP.png

  - name: ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹
    type: select
    filter: "éŸ©å›½|éŸ©|KR|ğŸ‡°ğŸ‡·|(?i)Korea"
    include-all: true
    icon: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Gallery/Color/KR.png

  - name: ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹
    type: select
    filter: "æ–°|å¡|SG|(?i)Singapore"
    include-all: true
    icon: https://raw.githubusercontent.com/Orz-3/mini/master/Color/SG.png

  - name: ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹
    type: select
    filter: "ç¾|US|(?i)States|American"
    include-all: true
    icon: https://raw.githubusercontent.com/Orz-3/mini/master/Color/US.png

  - name: ğŸ‡¹ğŸ‡¼ å°æ¹¾èŠ‚ç‚¹
    type: select
    filter: "å°|æ¹¾|TW|(?i)Taiwan"
    include-all: true
    icon: https://raw.githubusercontent.com/Orz-3/mini/master/Color/TW.png

  - name: ğŸŒ å…¶ä»–èŠ‚ç‚¹
    type: select
    filter: "^(?!.*(ğŸ‡­ğŸ‡°|HK|Hong|é¦™æ¸¯|ğŸ‡¹ğŸ‡¼|TW|Taiwan|Wan|å°|æ¹¾|ğŸ‡¯ğŸ‡µ|JP|Japan|æ—¥æœ¬|ğŸ‡¸ğŸ‡¬|SG|Singapore|ç‹®åŸ|ğŸ‡ºğŸ‡¸|US|United States|America|ç¾å›½|ğŸ‡°ğŸ‡·|KR|Korea|éŸ©å›½|éŸ“)).*$"
    include-all: true
    icon: https://raw.githubusercontent.com/Centralmatrix3/Matrix-io/master/Gallery/Color/Area.png

# **=============================== è§„åˆ™é›†é…ç½® ===============================**
RuleSet_Classical: &RuleSet_Classical
  type: http
  behavior: classical
  interval: 86400
  format: text

RuleSet_Domain: &RuleSet_Domain
  type: http
  behavior: domain
  interval: 86400
  format: text

RuleSet_IpCidr: &RuleSet_IpCidr
  type: http
  behavior: ipcidr
  interval: 86400
  format: text

RuleSet_Yaml: &RuleSet_Yaml
  type: http
  behavior: classical
  interval: 86400
  format: yaml

rule-providers:
  # ========== å¹¿å‘Šæ‹¦æˆªè§„åˆ™ ==========
  reject_non_ip_no_drop:
    <<: *RuleSet_Classical
    url: https://ruleset.skk.moe/Clash/non_ip/reject-no-drop.txt
    path: ./ruleset/reject_non_ip_no_drop.txt

  reject_non_ip_drop:
    <<: *RuleSet_Classical
    url: https://ruleset.skk.moe/Clash/non_ip/reject-drop.txt
    path: ./ruleset/reject_non_ip_drop.txt

  reject_non_ip:
    <<: *RuleSet_Classical
    url: https://ruleset.skk.moe/Clash/non_ip/reject.txt
    path: ./ruleset/reject_non_ip.txt

  reject_domainset:
    <<: *RuleSet_Domain
    url: https://ruleset.skk.moe/Clash/domainset/reject.txt
    path: ./ruleset/reject_domainset.txt

  reject_ip:
    <<: *RuleSet_Classical
    url: https://ruleset.skk.moe/Clash/ip/reject.txt
    path: ./ruleset/reject_ip.txt

  # ========== CDN è§„åˆ™ ==========
  cdn_domainset:
    <<: *RuleSet_Domain
    url: https://ruleset.skk.moe/Clash/domainset/cdn.txt
    path: ./ruleset/cdn_domainset.txt

  cdn_non_ip:
    <<: *RuleSet_Domain
    url: https://ruleset.skk.moe/Clash/non_ip/cdn.txt
    path: ./ruleset/cdn_non_ip.txt

  # ========== AI æœåŠ¡è§„åˆ™ ==========
  ai_non_ip:
    <<: *RuleSet_Classical
    url: https://ruleset.skk.moe/Clash/non_ip/ai.txt
    path: ./ruleset/ai_non_ip.txt

  OpenAi:
    <<: *RuleSet_Yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/OpenAI/OpenAI.yaml
    path: ./ruleset/OpenAi.yaml

  Copilot:
    <<: *RuleSet_Yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Copilot/Copilot.yaml
    path: ./ruleset/Copilot.yaml

  Anthropic:
    <<: *RuleSet_Yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Anthropic/Anthropic.yaml
    path: ./ruleset/Anthropic.yaml

  Claude:
    <<: *RuleSet_Yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Claude/Claude.yaml
    path: ./ruleset/Claude.yaml

  Gemini:
    <<: *RuleSet_Yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Gemini/Gemini.yaml
    path: ./ruleset/Gemini.yaml

  # ========== ç”µæŠ¥è§„åˆ™ ==========
  telegram_non_ip:
    <<: *RuleSet_Classical
    url: https://ruleset.skk.moe/Clash/non_ip/telegram.txt
    path: ./ruleset/telegram_non_ip.txt

  telegram_ip:
    <<: *RuleSet_Classical
    url: https://ruleset.skk.moe/Clash/ip/telegram.txt
    path: ./ruleset/telegram_ip.txt

  # ========== ç¤¾äº¤ä¸è°·æ­Œ (è¡¥å…¨) ==========
  Twitter:
    <<: *RuleSet_Yaml
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Twitter/Twitter.yaml"
    path: ./ruleset/Twitter.yaml

  Google:
    <<: *RuleSet_Yaml
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Google/Google.yaml"
    path: ./ruleset/Google.yaml

  YouTube:
    <<: *RuleSet_Yaml
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/YouTube/YouTube.yaml"
    path: ./ruleset/YouTube.yaml

  YouTubeMusic:
    <<: *RuleSet_Yaml
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/YouTubeMusic/YouTubeMusic.yaml"
    path: ./ruleset/YouTubeMusic.yaml

  PayPal:
    <<: *RuleSet_Yaml
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/PayPal/PayPal.yaml"
    path: ./ruleset/PayPal.yaml

  Netflix:
    <<: *RuleSet_Yaml
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Netflix/Netflix.yaml"
    path: ./ruleset/Netflix.yaml

  # ========== è‹¹æœæœåŠ¡è§„åˆ™ ==========
  apple_cdn:
    <<: *RuleSet_Domain
    url: https://ruleset.skk.moe/Clash/domainset/apple_cdn.txt
    path: ./ruleset/apple_cdn.txt

  apple_services:
    <<: *RuleSet_Classical
    url: https://ruleset.skk.moe/Clash/non_ip/apple_services.txt
    path: ./ruleset/apple_services.txt

  apple_cn_non_ip:
    <<: *RuleSet_Classical
    url: https://ruleset.skk.moe/Clash/non_ip/apple_cn.txt
    path: ./ruleset/apple_cn_non_ip.txt

  # ========== å¾®è½¯æœåŠ¡è§„åˆ™ ==========
  microsoft_cdn_non_ip:
    <<: *RuleSet_Classical
    url: https://ruleset.skk.moe/Clash/non_ip/microsoft_cdn.txt
    path: ./ruleset/microsoft_cdn_non_ip.txt

  microsoft_non_ip:
    <<: *RuleSet_Classical
    url: https://ruleset.skk.moe/Clash/non_ip/microsoft.txt
    path: ./ruleset/microsoft_non_ip.txt

  # ========== å“”å“©å“”å“©è§„åˆ™ ==========
  BiliBili:
    <<: *RuleSet_Yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/BiliBili/BiliBili.yaml
    path: ./ruleset/BiliBili.yaml

  Bahamut:
    <<: *RuleSet_Yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Bahamut/Bahamut.yaml
    path: ./ruleset/Bahamut.yaml

  # ========== æµåª’ä½“è§„åˆ™ ==========
  stream_non_ip:
    <<: *RuleSet_Classical
    url: https://ruleset.skk.moe/Clash/non_ip/stream.txt
    path: ./ruleset/stream_non_ip.txt

  stream_ip:
    <<: *RuleSet_Classical
    url: https://ruleset.skk.moe/Clash/ip/stream.txt
    path: ./ruleset/stream_ip.txt

  # ========== å…¶ä»–æœåŠ¡è§„åˆ™ ==========
  Github:
    <<: *RuleSet_Yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/GitHub/GitHub.yaml
    path: ./ruleset/Github.yaml

  Game:
    <<: *RuleSet_Yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Game/Game.yaml
    path: ./ruleset/Game.yaml

  # ========== ä¸‹è½½è§„åˆ™ ==========
  download_domainset:
    <<: *RuleSet_Domain
    url: https://ruleset.skk.moe/Clash/domainset/download.txt
    path: ./ruleset/download_domainset.txt

  download_non_ip:
    <<: *RuleSet_Domain
    url: https://ruleset.skk.moe/Clash/non_ip/download.txt
    path: ./ruleset/download_non_ip.txt

  # ========== å±€åŸŸç½‘è§„åˆ™ ==========
  lan_non_ip:
    <<: *RuleSet_Classical
    url: https://ruleset.skk.moe/Clash/non_ip/lan.txt
    path: ./ruleset/lan_non_ip.txt

  lan_ip:
    <<: *RuleSet_Classical
    url: https://ruleset.skk.moe/Clash/ip/lan.txt
    path: ./ruleset/lan_ip.txt

  # ========== å›½å†…è§„åˆ™ ==========
  domestic_non_ip:
    <<: *RuleSet_Classical
    url: https://ruleset.skk.moe/Clash/non_ip/domestic.txt
    path: ./ruleset/domestic_non_ip.txt

  direct_non_ip:
    <<: *RuleSet_Classical
    url: https://ruleset.skk.moe/Clash/non_ip/direct.txt
    path: ./ruleset/direct_non_ip.txt

  domestic_ip:
    <<: *RuleSet_Classical
    url: https://ruleset.skk.moe/Clash/ip/domestic.txt
    path: ./ruleset/domestic_ip.txt

  china_ip:
    <<: *RuleSet_IpCidr
    url: https://ruleset.skk.moe/Clash/ip/china_ip.txt
    path: ./ruleset/china_ip.txt

  # ========== å…¨çƒä»£ç†è§„åˆ™ ==========
  global_non_ip:
    <<: *RuleSet_Classical
    url: https://ruleset.skk.moe/Clash/non_ip/global.txt
    path: ./ruleset/global_non_ip.txt

# **=============================== åˆ†æµè§„åˆ™ ===============================**
rules:
  # ========== è‡ªå®šä¹‰ç›´è¿è§„åˆ™ ==========
  - IP-CIDR,192.168.31.0/24,DIRECT,no-resolve
  - IP-CIDR,100.64.0.0/10,DIRECT,no-resolve
  - DOMAIN-SUFFIX,ts.net,DIRECT
  - DOMAIN-KEYWORD,tailscale,DIRECT
  - DOMAIN-SUFFIX,guoker.org,DIRECT
  - DOMAIN-SUFFIX,gying.net,DIRECT
  - DOMAIN-SUFFIX,yunwu.ai,DIRECT
  - DOMAIN-SUFFIX,smardaten.com,DIRECT
  - DOMAIN-SUFFIX,openrouter.ai,DIRECT
  - DOMAIN-SUFFIX,right.codes,DIRECT
  - DOMAIN-SUFFIX,juejin.cn,DIRECT

  # ========== è‡ªå®šä¹‰ä»£ç†è§„åˆ™ ==========
  - DOMAIN-SUFFIX,coze.com,ğŸŒ å…¨çƒåŠ é€Ÿ
  - DOMAIN-SUFFIX,ouonetwork.com,ğŸŒ å…¨çƒåŠ é€Ÿ
  - DOMAIN-SUFFIX,cauenvao.click,ğŸŒ å…¨çƒåŠ é€Ÿ
  - DOMAIN-SUFFIX,linux.do,ğŸŒ å…¨çƒåŠ é€Ÿ
  - DOMAIN-SUFFIX,ldstatic.com,ğŸŒ å…¨çƒåŠ é€Ÿ
  - DOMAIN-SUFFIX,qinzhiai.com,ğŸŒ å…¨çƒåŠ é€Ÿ
  - DOMAIN-SUFFIX,makerworld.com,ğŸŒ å…¨çƒåŠ é€Ÿ
  - DOMAIN-SUFFIX,openlist.team,ğŸŒ å…¨çƒåŠ é€Ÿ

  # ========== å¹¿å‘Šæ‹¦æˆªè§„åˆ™ ==========
  - RULE-SET,reject_non_ip,REJECT
  - RULE-SET,reject_domainset,REJECT
  - RULE-SET,reject_non_ip_drop,REJECT-DROP
  - RULE-SET,reject_non_ip_no_drop,REJECT
  - RULE-SET,reject_ip,REJECT

  # ========== AI æœåŠ¡è§„åˆ™ ==========
  - DOMAIN-KEYWORD,antigravity,ğŸ¤– äººå·¥æ™ºèƒ½
  - DOMAIN-SUFFIX,grok.com,ğŸ¤– äººå·¥æ™ºèƒ½
  - DOMAIN-SUFFIX,cici.com,ğŸ¤– äººå·¥æ™ºèƒ½
  - DOMAIN-SUFFIX,instcopilot-api.com,ğŸ¤– äººå·¥æ™ºèƒ½
  - DOMAIN-SUFFIX,oochat.space,ğŸ¤– äººå·¥æ™ºèƒ½
  - DOMAIN-SUFFIX,trae.ai,ğŸ¤– äººå·¥æ™ºèƒ½
  - DOMAIN-SUFFIX,marscode.com,ğŸ¤– äººå·¥æ™ºèƒ½
  - DOMAIN-SUFFIX,lmarena.ai,ğŸ¤– äººå·¥æ™ºèƒ½
  - RULE-SET,OpenAi,ğŸ¤– äººå·¥æ™ºèƒ½
  - RULE-SET,Copilot,ğŸ¤– äººå·¥æ™ºèƒ½
  - RULE-SET,Gemini,ğŸ¤– äººå·¥æ™ºèƒ½
  - RULE-SET,Anthropic,ğŸ¤– äººå·¥æ™ºèƒ½
  - RULE-SET,Claude,ğŸ¤– äººå·¥æ™ºèƒ½
  - RULE-SET,ai_non_ip,ğŸ¤– äººå·¥æ™ºèƒ½

  # ========== ç¤¾äº¤ä¸æ ¸å¿ƒæœåŠ¡ ==========
  - RULE-SET,Twitter,ğŸ¦ æ¨ç‰¹æœåŠ¡
  - RULE-SET,telegram_non_ip,âœˆï¸ ç”µæŠ¥æ¶ˆæ¯
  - RULE-SET,telegram_ip,âœˆï¸ ç”µæŠ¥æ¶ˆæ¯
  - RULE-SET,PayPal,ğŸ’³ PayPal
  - RULE-SET,Google,ğŸ” è°·æ­ŒæœåŠ¡
  - RULE-SET,YouTube,ğŸ¬ å›½é™…åª’ä½“
  - RULE-SET,YouTubeMusic,ğŸ¬ å›½é™…åª’ä½“

  # ========== å¾®è½¯ä¸è‹¹æœæœåŠ¡ ==========
  - RULE-SET,apple_cdn,DIRECT
  - RULE-SET,apple_cn_non_ip,DIRECT
  - RULE-SET,apple_services,ğŸ è‹¹æœæœåŠ¡
  - RULE-SET,microsoft_cdn_non_ip,DIRECT
  - RULE-SET,microsoft_non_ip,â“‚ï¸ å¾®è½¯æœåŠ¡

  # ========== å…¶ä»–æœåŠ¡ ==========
  - RULE-SET,Github,ğŸŒ å…¨çƒåŠ é€Ÿ
  - RULE-SET,Game,ğŸ® æ¸¸æˆå¹³å°

  # ========== æµåª’ä½“è§„åˆ™ ==========
  - RULE-SET,BiliBili,ğŸ“º å“”å“©å“”å“©
  - RULE-SET,Bahamut,ğŸ“º å“”å“©å“”å“©
  - RULE-SET,Netflix,ğŸ¬ å›½é™…åª’ä½“
  - RULE-SET,stream_non_ip,ğŸ¬ å›½é™…åª’ä½“
  - RULE-SET,stream_ip,ğŸ¬ å›½é™…åª’ä½“

  # ========== CDNä¸ä¸‹è½½ (åç½®é˜²è¯¯æ€) ==========
  - RULE-SET,cdn_domainset,ğŸ¯ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,cdn_non_ip,ğŸ¯ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,download_domainset,ğŸ¯ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,download_non_ip,ğŸ¯ èŠ‚ç‚¹é€‰æ‹©

  # ========== å…¨çƒä»£ç†è§„åˆ™ ==========
  - RULE-SET,global_non_ip,ğŸŒ å…¨çƒåŠ é€Ÿ

  # ========== å›½å†…ä¸ç›´è¿è§„åˆ™ ==========
  - RULE-SET,domestic_non_ip,DIRECT
  - RULE-SET,direct_non_ip,DIRECT
  - RULE-SET,lan_non_ip,DIRECT
  - RULE-SET,lan_ip,DIRECT
  - RULE-SET,domestic_ip,DIRECT
  - RULE-SET,china_ip,DIRECT
  - GEOIP,private,DIRECT,no-resolve
  - GEOIP,CN,DIRECT,no-resolve

  # ========== å…œåº•è§„åˆ™ ==========
  - MATCH,ğŸ¯ å…œåº•åˆ†æµ
